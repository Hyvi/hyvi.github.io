<!doctype html><html lang=zh class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.91.2"><link rel=canonical type=text/html href=https://hyvi.github.io/docs/daily/>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>Daily 杂乱记录 | Elon`s Blog</title>
<meta name=description content="Elon blog site"><meta property="og:title" content="Daily 杂乱记录">
<meta property="og:description" content="用于记录日常相关的笔记
">
<meta property="og:type" content="website">
<meta property="og:url" content="https://hyvi.github.io/docs/daily/"><meta property="og:site_name" content="Elon`s Blog">
<meta itemprop=name content="Daily 杂乱记录">
<meta itemprop=description content="用于记录日常相关的笔记
"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Daily 杂乱记录">
<meta name=twitter:description content="用于记录日常相关的笔记
">
<link rel=preload href=/scss/main.min.f37c3fb6f746e6bc4c5eba11e2f176c897da8bb403ddc2aaac1d527737818c66.css as=style>
<link href=/scss/main.min.f37c3fb6f746e6bc4c5eba11e2f176c897da8bb403ddc2aaac1d527737818c66.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.8/lunr.min.js integrity=sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY crossorigin=anonymous></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Elon`s Blog</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><i class="fas fa-blog"></i><span class=active>Blog</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/tools/><i class="fas fa-tools"></i><span>Tools</span></a>
</li>
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class=nav-link href=/about/><i class="fas fa-info-circle"></i><span>About</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
<input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/offline-search-index.2d2f20daa6aad5ae0d2e50d523d834d9.json data-offline-search-base-href=/ data-offline-search-max-results=10>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
</div>
<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
</div>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.
</p><p>
<a href=/docs/daily/>返回本页常规视图</a>.
</p>
</div>
<h1 class=title>Daily 杂乱记录</h1>
<div class=lead>用于记录日常相关的笔记</div>
<ul>
<li>1: <a href=#pg-a3c4cafdba401e6278ffa23d11bab6bd>子网掩码</a></li>
<li>2: <a href=#pg-240830fcac0d44698ca10107f15b2e3c>OAuth 2.0 Token Exchange协议解读</a></li>
<li>3: <a href=#pg-fc19e4d4f6f294cb8a15c2e4677f0cc8>OIDC（OPENID CONNECT）身份认证授权</a></li>
<li>4: <a href=#pg-23b1c06675f6773e272050c6049f3aa0>Io wait 告警问题</a></li>
<li>5: <a href=#pg-76534db6d623a41b5cf87ab45c00cae7>Daily 0201</a></li>
<li>6: <a href=#pg-b1b82d75a4a886e569e8c6c0b1e05147>Daily 0321</a></li>
<li>7: <a href=#pg-6c7014cb8bf3434c55dd33c4ecc3e910>Daily 0503</a></li>
<li>8: <a href=#pg-1ca7c71430af3a9f7980b371807adbe9>Daily 0607</a></li>
<li>9: <a href=#pg-42dc9af5b2030b909b1e6cdc427a47f8>Daily 0612</a></li>
<li>10: <a href=#pg-11c618c16edab1f3526f5402311e74c4>Daily 0813</a></li>
<li>11: <a href=#pg-79d997335fbe9696d3f0e05d03d6384e>Daily 0821 chrome app/extension</a></li>
<li>12: <a href=#pg-4a62dfb087d1255a1733eafeca76273f>Daily 10/09</a></li>
<li>13: <a href=#pg-b208d2437975111a7aff23977621a97d>Daily 10/15 配置https</a></li>
<li>14: <a href=#pg-4ae1457ece262608778b9af9debde46d>Daily 10/16</a></li>
<li>15: <a href=#pg-639931eb8e570838e56327173dc99821>Daily 10/18</a></li>
<li>16: <a href=#pg-b58d2181d1aacb4305b0c2a0a310c79c>Daily 10/19 三个月</a></li>
<li>17: <a href=#pg-72467628488feb8684a76493e89c7548>Daily 10/24</a></li>
<li>18: <a href=#pg-51864cb2d6aa3f64fe663dbf073b454f>Daily 10/30</a></li>
<li>19: <a href=#pg-d170c7dffbbbee2dd73fe23d5e9f7249>Daily 1018 vim go + Ycm</a></li>
<li>20: <a href=#pg-c121e9bd4252f17d6df7f51fad46f50a>Daily 11.08 Docker安装</a></li>
<li>21: <a href=#pg-64dc87cf8322fe024db1792709e6060b>Daily 11/03</a></li>
<li>22: <a href=#pg-57b85631ef070b92b6eaadec0585d0ce>Daily 1104</a></li>
<li>23: <a href=#pg-6df3950e09f1ed7855c966a0b3a9511d>Daily 1110 DOCKER部署实践总结</a></li>
<li>24: <a href=#pg-4e1ee5882d9e62d65822dde8d3e442ea>Daily 1116</a></li>
<li>25: <a href=#pg-163d016ec3b8a0cea24d349cd91a92d0>Daily 1127 MYSQL </a></li>
<li>26: <a href=#pg-0f7abe9fd840584d9989a663fa49cc9c>Daily 1208</a></li>
<li>27: <a href=#pg-1b89093d737fb3e3735edc770710201b>Daily 1215</a></li>
<li>28: <a href=#pg-e8bc88a079e7284d75958ee9e69d263e>Daily 1229</a></li>
<li>29: <a href=#pg-cd168b78dd4295e42ebc6ea7c8951f33>Daily 2021/11/01 Postive Discipline</a></li>
<li>30: <a href=#pg-a6591dd7049ab03f1d864f15c9b03dac>Daily 2022/01/13</a></li>
<li>31: <a href=#pg-d7217e8c6dcba63b859a27c5f6578cf8>Daily 5/31</a></li>
<li>32: <a href=#pg-0a97a012d24ad5724bc2bb78e1c4660f>Daily 6/1</a></li>
<li>33: <a href=#pg-0b39f164c21923e4713cfe173a4d8037>Daily 6/3</a></li>
<li>34: <a href=#pg-83405704c229ae1f822f152500ebd082>Daily 9/11</a></li>
<li>35: <a href=#pg-a9ba4dfbcd416be7150b8304aa335be1>Daily 9/12</a></li>
<li>36: <a href=#pg-5abb1d58ec4fe4729ab279df0840251d>Daily 9/13</a></li>
<li>37: <a href=#pg-78e7f3d24a774bffb8590129b266410b>Daily 9/14</a></li>
<li>38: <a href=#pg-0fb0beed72ec94421cecb4332c0f17f6>Daily 9/18</a></li>
<li>39: <a href=#pg-3098fe12d2ae39d8528f92beb761a9af>Daily 9/21</a></li>
<li>40: <a href=#pg-c727370ca88bf63f507c67e9642157c1>Daily 9/22</a></li>
<li>41: <a href=#pg-ba27040cd5b9dd2964e945a84c423939>Daily 9/25 #vpn</a></li>
<li>42: <a href=#pg-aa028a05e971916505636bfdb54422ab>Daily 9/27 Git 相关知识点</a></li>
<li>43: <a href=#pg-3b05a0a3b23c3b160359824339a7ea82>Daily 9/5</a></li>
<li>44: <a href=#pg-3e7749c7032db639158bfd853be29f21>Daily 9/6</a></li>
<li>45: <a href=#pg-b614d07cd7c901562de1ae291997c681>Daily 9/8</a></li>
<li>46: <a href=#pg-d317738cb1682d537736db77b07bded5>又是一年最长假-国庆 Daily 9/29</a></li>
</ul>
<div class=content>
</div>
</div>
<div class=td-content>
<h1 id=pg-a3c4cafdba401e6278ffa23d11bab6bd>1 - 子网掩码</h1>
<h2 id=名词解释>名词解释</h2>
<p><strong>子网掩码</strong></p>
<p>它就是拿来划分子网的，更准确的说，划分子网的同时，还能通过它知道主机在子网里面的具体ip的具体地址。</p>
<p><strong>网络号（subnetwork）</strong></p>
<p>表示我住哪个小区。</p>
<p><strong>主机号(host)</strong></p>
<p>表示我家门牌号是多少。</p>
<p><strong>CIDR(无类别域间路由)/VLSM（可变长子网掩码）</strong></p>
<p>比如： 192.168.0.0/24</p>
<p><img src=https://pic1.zhimg.com/80/v2-6767be87e0f4936e77224461038d9eec_720w.jpg alt="更多 CIDR / VLSM 例子"></p>
<h2 id=参考>参考</h2>
<p>[1] 知乎 noopsphere: 什么是子网掩码</p>
<br>
<center> ·End· </center>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-240830fcac0d44698ca10107f15b2e3c>2 - OAuth 2.0 Token Exchange协议解读</h1>
<p>S3、OSS使用了STS，但是对其原来并不了解。通过这篇文档梳理对STS实现有一定的了解.</p>
<h1 id=名词解释>名词解释</h1>
<p><strong>security token</strong>: a set of information that facilitates the sharing of identity and security information in heterogeneous environments or across security domains. Examples of security tokens include JSON Web Tokens (JWTs) and Security Assertion Markup Language (SAML) 2.0 assertions. Security tokens are typically signed to achieve integrity and sometimes also encrypted to archive confidentiality.</p>
<h1 id=实践>实践</h1>
<p>需要找一个实现的开源代码看看.</p>
<h1 id=参考>参考</h1>
<p>OAuth 2.0 Token Exchange： a protocol extending OAuth 2.0 that enable clients to request and obtain security tokens from authorization servers acting in the role of an STS . <a href=https://tools.ietf.org/html/rfc8693>https://tools.ietf.org/html/rfc8693</a></p>
<br>
<center> ·End· </center>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-fc19e4d4f6f294cb8a15c2e4677f0cc8>3 - OIDC（OPENID CONNECT）身份认证授权</h1>
<p>只有一张图！</p>
<p>OIDC = （identity，authentication） + OAuth2.0，在<a href=https://tools.ietf.org/html/rfc6749>OAuth2.0</a> 上构建了一个身份层，是一个基于OAuth2.0协议的身份认证标准协议。<br>
<img src=http://www.csharpkit.com/Data/csharpkit/upload/image/20170923/6364180189599301186875856.png alt=OIDC应用场景></p>
<p>再来一张图吧！
<img src=https://hyvi.github.io/blog-images/20200405/oidc_2020-04-06_00-50-25.png alt=基于OAuth的认证与身份协议的各个组件></p>
<h2 id=名词解释>名词解释</h2>
<p><strong>RP</strong>: 在新的协议语境中，客户端叫依赖方，或者叫 RP</p>
<p><strong>IdP</strong>: 从概念上将手段服务器和受保护资源合并为身份提供方</p>
<p><strong>ID令牌</strong>： 用于携带有关身份认证事件本身的信息。解决不同身份提供者的协议各不相同的问题。</p>
<h2 id=身份认证>身份认证</h2>
<ul>
<li>资源拥有者要在授权服务器上授权端点上进行身份认证
为什么有？想想。“忽略了一个环节：对资源拥有者进行身份认证”。</li>
<li>客户端要在授权服务器的令牌端点进行身份认证</li>
<li>最后，基于OAuth实现的身份认证 - OpenID Connect</li>
</ul>
<h2 id=发现协议>发现协议</h2>
<p>openid-connect discovery 动态服务器发现， 客户端需要知道 IdP的发布者URL。</p>
<ul>
<li>可以直接配置，比如NASAR</li>
<li>也可以基于WebFinger协议来发现发布者。</li>
</ul>
<h2 id=客户端注册协议>客户端注册协议</h2>
<p>可以昂客户端向新的身份提供者注册。与OAuth动态客户端注册协议扩展并行，两者是相互兼容的， 参考OAuth动态客户端注册扩展。</p>
<ul>
<li>如果客户端需要访问的API是由多个不同的服务器提供的。</li>
<li>如果客户端软件有多个实例，每个实例都需要与同一个授权服务器交互。</li>
</ul>
<h2 id=不同的openid-connect客户端>不同的OpenID Connect客户端</h2>
<h3 id=authorization-code-flow>Authorization Code Flow</h3>
<p><img src=http://www.csharpkit.com/Data/csharpkit/upload/image/20170923/6364180189635879511255253.jpg alt="Authorization Code Flow"></p>
<h3 id=implicit-flow>Implicit Flow</h3>
<p>在<code>Successful Authentication Response</code>里返回id_token和token, 而不是code</p>
<h3 id=hybrid-flow>Hybrid Flow</h3>
<p>区别在与reponse_type 可以为 <code>code id_token</code>, <code>code token</code> or <code>code id_token token</code><br>
不同的返回适用于什么样的场景了？</p>
<h2 id=其他>其他</h2>
<h3 id=access-token>Access Token</h3>
<p><a href=https://tools.ietf.org/html/draft-ietf-oauth-access-token-jwt-03#section-2.2>JSON Web Token(JWT) Profile for OAuth2.0 Access Tokens </a><br>
定义了Token的Data Structure，以及发布和消费Access Token具体的内容</p>
<h2 id=实践>实践</h2>
<p>Kong OpenID Connect 支持多种授权流程.罗列下常见的流程</p>
<ul>
<li>Session Authentication</li>
<li>JWT Access Token Authentication</li>
<li>User Info Authentication</li>
<li>Introspection Authentication</li>
<li>Authorization Code Flow</li>
</ul>
<p>更多内容，见参考</p>
<p><a href=https://github.com/apache/apisix/blob/master/apisix/plugins/openid-connect.lua> Apache Apisix </a> 支持的认证非常少，比如 Authorization Code Flow 不支持。</p>
<h2 id=参考>参考</h2>
<ol>
<li>
<p>OIDC 身份认证授权<br>
<a href=http://www.csharpkit.com/2017-09-23_58568.html>http://www.csharpkit.com/2017-09-23_58568.html</a></p>
</li>
<li>
<p>OpenID Connect Core 1.0 incorporating errata set 1<br>
<a href=https://openid.net/specs/openid-connect-core-1_0.html>https://openid.net/specs/openid-connect-core-1_0.html</a></p>
</li>
<li>
<p>User Authentication with OAuth 2.0
<a href=https://oauth.net/articles/authentication/>https://oauth.net/articles/authentication/</a></p>
</li>
<li>
<p>OAuth 2.0 实战
在web.kamiapp.com里</p>
</li>
<li>
<p>OpenID Connect Plugin <a href=https://docs.konghq.com/hub/kong-inc/openid-connect/>https://docs.konghq.com/hub/kong-inc/openid-connect/</a></p>
</li>
</ol>
<br>
<center> ·End· </center>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-23b1c06675f6773e272050c6049f3aa0>4 - Io wait 告警问题</h1>
<blockquote>
<p><code>%iowait</code> 表示在一个采样周期内有百分之几的时间属于以下情况：CPU空闲、并且仍未完成的I/O请求。</p>
</blockquote>
<p>Percentage of time that the CPU or CPUs were idle during which the system had an outstanding disk I/O request.</p>
<p>两个误解：</p>
<ul>
<li><code>%iowait</code> 表示 CPU 不能工作的时间</li>
<li><code>%iowait</code> 表示 I/O 有瓶颈</li>
</ul>
<h2 id=参考>参考：</h2>
<p><a href="http://linuxperf.com/?p=33">理解%IOWAIT(%WIO)</a></p>
<br>
<center> ·End· </center>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-76534db6d623a41b5cf87ab45c00cae7>5 - Daily 0201</h1>
<h2 id=docker-compose>docker-compose</h2>
<p>docker-compose 在同一个目录下启动两个容器，不出现覆盖的情况</p>
<pre tabindex=0><code>docker-compose -p dev  up
docker-compose -p test up 


</code></pre><p>很方便了</p>
<p><a href=https://stackoverflow.com/questions/41831582/how-do-i-run-the-same-docker-compose-yml-several-times-on-same-docker-daemon-wit>How do I run the same docker-compose.yml several times on same docker daemon with different names?</a></p>
<h2 id=iterm-2>Iterm 2</h2>
<p>前进后退一个单词是不是伤老壳，终于解决了</p>
<p>vim中使用<code>ESC + b/f</code> 来前进或者后退一个单词，ESC真远<br>
设置profile - key来搞定一切 <code>Option + b/f</code></p>
<p><a href=http://aaronmoment.cn/iterm2/>参考文档 item2常用快捷键总结</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b1b82d75a4a886e569e8c6c0b1e05147>6 - Daily 0321</h1>
<h2 id=mysql-character_set>mysql character_set</h2>
<p>show variables like &lsquo;character%’;<br>
从my.ini下手（标签下没有的添加，有的修改）</p>
<pre tabindex=0><code>      [client]
       default-character-set=utf8
      [mysql]
       default-character-set=utf8
      [mysqld]
      default-character-set=utf8
</code></pre><p>Set character_set_database = utf8 重启失效</p>
<p><a href=https://stackoverflow.com/questions/3942888/unicodeencodeerror-latin-1-codec-cant-encode-character>unicodeencodeerror-latin-1-codec-cant-encode-character</a></p>
<h2 id=gerrit-admin-and-h2-database>gerrit admin and h2 database</h2>
<p>问题： gerrit admin没有实际的权限</p>
<blockquote>
<p>Since UUID from groups file and db table account_groups were different I;ve updated table with correct hashes from the group file and added my accont to Administrators group.</p>
</blockquote>
<blockquote>
<p>e.g. update account_groups set group_uuid=&lsquo;9d3ab2b20b498a1793e2e6112d7bdcb01b852588&rsquo;, owner_group_uuid=&lsquo;9d3ab2b20b498a1793e2e6112d7bdcb01b852588&rsquo; where group_id=1;
INSERT INTO account_group_members (account_id, group_id) VALUES ( &ldquo;1&rdquo;, &ldquo;1&rdquo;);</p>
</blockquote>
<p><a href=https://groups.google.com/forum/#!topic/repo-discuss/LuJS8E5j0vQ>Admin group member cannot create</a></p>
<p>问题：怎么进入h2数据库</p>
<pre tabindex=0><code>java -cp  h2-1.3.175.jar  org.h2.tools.Script -url jdbc:h2:/home/gerrit/db/ReviewDB
</code></pre><p>查找h2的jar包，然后找到ReviewDB的数据库文件位置</p>
<h2 id=docker服务器时间同步>docker服务器时间同步</h2>
<ol>
<li>安装tzdata软件(apt-get install -y tzdata)</li>
<li>ENV TZ America/Los_Angeles</li>
</ol>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6c7014cb8bf3434c55dd33c4ecc3e910>7 - Daily 0503</h1>
<h2 id=vcpu的解释>vCPU的解释</h2>
<p>虛擬主機（Virtual Machine，VM）的CPU稱之為vCPU，當虛擬主機需要CPU運算資源的時候，VMkernel會將此虛擬主機需要的運算資源對應（Mapping）到實體伺服器的CPU核心運算HEC（Hardware Execution Context）能力，以使得虛擬主機得以進行運算。簡單來說，HEC就是實體伺服器的CPU核心數（Cores）。</p>
<p>所以，如圖5所示當虛擬主機配有1 vCPU，在需要運算資源時，只要VMkernel對應到實體主機上其中一個HEC就可以執行運算；若虛擬主機配有2 vCPU，在需要運算資源時，則必須對應到2個HEC才能運算；若4 vCPU則要對應4個HEC才能運算。</p>
<p><img src=https://hyvi.github.io/blog-images/20180503/NP120109000212031413512801.png alt=虛擬主機vCPU與實體伺服器HEC對應>
<a href="http://www.netadmin.com.tw/article_content.aspx?sn=1201090002&jump=2">更多内容 </a></p>
<h2 id=google-python-style-guide>google python style guide</h2>
<p>Python 是 Google主要的脚本语言。这本风格指南主要包含的是针对python的编程准则。<br>
<a href=https://github.com/zh-google-styleguide/zh-google-styleguide/tree/master/google-python-styleguide>中文版Git</a></p>
<h2 id=elk>elk</h2>
<p>更新license: <a href=https://www.elastic.co/guide/en/elasticsearch/reference/6.2/update-license.html>Update License API</a><br>
注册之后，可以使用xpack, 后台日志不会重复打</p>
<pre tabindex=0><code class=language-log data-lang=log>logstash_1       | [2018-05-03T11:31:00,614][INFO ][logstash.licensechecker.licensereader] Running health check to see if an Elasticsearch connection is working {:healthcheck_url=&gt;http://logstash_system:xxxxxx@elasticsearch:9200/, :path=&gt;&quot;/&quot;}
logstash_1       | [2018-05-03T11:31:00,615][WARN ][logstash.licensechecker.licensereader] Attempted to resurrect connection to dead ES instance, but got an error. {:url=&gt;&quot;http://logstash_system:xxxxxx@elasticsearch:9200/&quot;, :error_type=&gt;LogStash::Outputs::ElasticSearch::HttpClient::Pool::BadResponseCodeError, :error=&gt;&quot;Got response code '401' contacting Elasticsearch at URL 'http://elasticsearch:9200/'&quot;}
logstash_1       | [2018-05-03T11:31:03,796][INFO ][logstash.outputs.elasticsearch] Running health check to see if an Elasticsearch connection is working {:healthcheck_url=&gt;http://logstash_system:xxxxxx@elasticsearch:9200/, :path=&gt;&quot;/&quot;}
logstash_1       | [2018-05-03T11:31:03,797][WARN ][logstash.outputs.elasticsearch] Attempted to resurrect connection to dead ES instance, but got an error. {:url=&gt;&quot;http://logstash_system:xxxxxx@elasticsearch:9200/&quot;, :error_type=&gt;LogStash::Outputs::ElasticSearch::HttpClient::Pool::BadResponseCodeError, :error=&gt;&quot;Got response code '401' contacting Elasticsearch at URL 'http://elasticsearch:9200/'&quot;}
</code></pre><h2 id=elastalert>elastalert</h2>
<p>docker elastalert</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-dockerfile data-lang=dockerfile><span style=color:#204a87;font-weight:700>FROM</span><span style=color:#4e9a06> python:2.7</span><span style=color:#a40000>
</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>WORKDIR</span><span style=color:#4e9a06> /</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>RUN</span> git clone https://github.com/Yelp/elastalert.git<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>RUN</span> <span style=color:#204a87>cd</span>  elastalert <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> git checkout v0.1.30 <span style=color:#ce5c00;font-weight:700>&amp;&amp;</span> pip install -r requirements.txt<span style=color:#a40000>
</span><span style=color:#a40000>
</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>WORKDIR</span><span style=color:#4e9a06> /elastalert/</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>RUN</span> ls -l <span style=color:#a40000>
</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>RUN</span> apt-get install -y tzdata<span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>ENV</span> TZ Asia/Shanghai<span style=color:#a40000>
</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#204a87;font-weight:700>CMD</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#34;python&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#34;elastalert/elastalert.py&#34;</span><span style=color:#000;font-weight:700>]</span><span style=color:#a40000>
</span><span style=color:#a40000>
</span></code></pre></div><p>参考文档：<br>
<a href=https://mannekentech.com/2018/01/19/using-elastalert/>Using ElastAlert</a><br>
<a href=https://engineeringblog.yelp.com/2015/10/elastalert-alerting-at-scale-with-elasticsearch.html>ElastAlert: Alerting At Scale With Elasticsearch </a> 各种异常机制</p>
<p>index_not_found_exception 定位python报错行, 问题在于： elastalert判断elastsearch存在index，而实际上并不存在<br>
<a href=https://github.com/Yelp/elastalert/issues/1139> github elastert isssue 1 </a><br>
解决办法：<br>
<a href=https://github.com/Yelp/elastalert/blob/master/elastalert/create_index.py> create_index.py </a> 244行注释掉delete函数</p>
<h2 id=elasticsearch>elasticsearch</h2>
<p>some Elasticsearch terminology:
an Elasticsearch <code>cluster</code> is made up of one or more <code>nodes</code>. Each of these nodes contains <code>indexes</code> which are split into multiple <code>shards</code>. Elasticsearch makes copies of these shards called <code>replicas</code>. These (primary) shards and replicas are then placed on various nodes throughout the cluster.<br>
<a href=http://chrissimpson.co.uk/elasticsearch-yellow-cluster-status-explained.html>更多内容</a></p>
<p>Elasticsearch 中写一致性原理以及quorum机制</p>
<blockquote>
<p>[查看详情](Elasticsearch 中写一致性原理以及quorum机制)</p>
</blockquote>
<p><a href=https://luyiisme.github.io/2017/05/06/elasticsearch-docker-on-one-vm/>Elasticsearch 5 docker 集群部署&ndash;单虚拟机多容器实例</a></p>
<h3 id=实践>实践</h3>
<p>基于 《Elasticsearch: The Definitive Guide》的笔记</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>

GET /my_index/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match_phrase&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;names&#34;</span>: <span style=color:#4e9a06>&#34;Lincoln Smith&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /_analyze
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;analyzer&#34;</span>: <span style=color:#4e9a06>&#34;standard&#34;</span>,
  <span style=color:#4e9a06>&#34;text&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
    <span style=color:#4e9a06>&#34;John Abraham&#34;</span>,
    <span style=color:#4e9a06>&#34;Lincoln Smith&#34;</span>
  <span style=color:#ce5c00;font-weight:700>]</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /my_index/_doc/9 

PUT /my_index/_doc/9  
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;names&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#34;John Abraham&#34;</span>, <span style=color:#4e9a06>&#34;Lincoln Smith&#34;</span><span style=color:#ce5c00;font-weight:700>]</span>
<span style=color:#ce5c00;font-weight:700>}</span>


GET /my_blog/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match_phrase&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;body&#34;</span>: <span style=color:#4e9a06>&#34;quick brown fox&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /my_blog/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;dis_max&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;queries&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;Quick pets&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>,
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;body&#34;</span>: <span style=color:#4e9a06>&#34;Quick pets&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>]</span>,
      <span style=color:#4e9a06>&#34;tie_breaker&#34;</span>: 0.7
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>



GET /my_blog/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;dis_max&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;queries&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;Brown fox&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>,
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;body&#34;</span>: <span style=color:#4e9a06>&#34;Brown fox&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>]</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>




<span style=color:#8f5902;font-style:italic># 返回了并不是用户想要的结果 </span>
GET /my_blog/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;bool&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;should&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;Brown fox&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>,
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;body&#34;</span>: <span style=color:#4e9a06>&#34;Brown fox&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>]</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>



PUT /my_blog/_doc/2
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;Keeping pets healthy&#34;</span>,    
  <span style=color:#4e9a06>&#34;body&#34;</span>:  <span style=color:#4e9a06>&#34;My quick brown fox eats rabbits on a regular basis.&#34;</span>
<span style=color:#ce5c00;font-weight:700>}</span>

PUT /my_blog/_doc/1
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;Quick brown rabbits&#34;</span>,    
  <span style=color:#4e9a06>&#34;body&#34;</span>:  <span style=color:#4e9a06>&#34;Brown rabbits are commonly seen.&#34;</span>
<span style=color:#ce5c00;font-weight:700>}</span>


PUT /my_blog



GET /my_index/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#4e9a06>&#34;BROWN DOG&#34;</span>,
        <span style=color:#4e9a06>&#34;operator&#34;</span>: <span style=color:#4e9a06>&#34;and&#34;</span>
      <span style=color:#ce5c00;font-weight:700>}</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /my_index/_search 
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;QUICK!&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


POST /my_index/_bulk
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;_id&#34;</span>: <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;The quick brown fox&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;_id&#34;</span>: <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#ce5c00;font-weight:700>}}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;The quick brown fox jumps over the lazy dog&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;_id&#34;</span>: <span style=color:#0000cf;font-weight:700>3</span> <span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;The quick brown fox jumps over the quick dog&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;_id&#34;</span>: <span style=color:#0000cf;font-weight:700>4</span> <span style=color:#ce5c00;font-weight:700>}}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;Brown fox brown dog&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span>


<span style=color:#8f5902;font-style:italic># 为什么 shard 为 1 </span>
PUT /my_index
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;settings&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;number_of_shards&#34;</span>: <span style=color:#0000cf;font-weight:700>1</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
  
<span style=color:#ce5c00;font-weight:700>}</span>


DELETE /my_index 


GET /my_store/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;bool&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;should&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;term&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;productID&#34;</span>: <span style=color:#4e9a06>&#34;KDKE-B-9947-#kL5&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>,
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;bool&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;must&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
              <span style=color:#ce5c00;font-weight:700>{</span>
                <span style=color:#4e9a06>&#34;term&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
                  <span style=color:#4e9a06>&#34;price&#34;</span>: <span style=color:#4e9a06>&#34;30&#34;</span>
                <span style=color:#ce5c00;font-weight:700>}</span>
              <span style=color:#ce5c00;font-weight:700>}</span>,
              <span style=color:#ce5c00;font-weight:700>{</span>
                <span style=color:#4e9a06>&#34;term&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
                  <span style=color:#4e9a06>&#34;productID&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
                    <span style=color:#4e9a06>&#34;value&#34;</span>: <span style=color:#4e9a06>&#34;JODL-X-1937-#pV7&#34;</span>
                  <span style=color:#ce5c00;font-weight:700>}</span>
                <span style=color:#ce5c00;font-weight:700>}</span>
              <span style=color:#ce5c00;font-weight:700>}</span>
            <span style=color:#ce5c00;font-weight:700>]</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>]</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


DELETE /my_store

GET /my_store/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;bool&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;must&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
        <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;match_all&#34;</span>: <span style=color:#ce5c00;font-weight:700>{}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>]</span>, 
      <span style=color:#4e9a06>&#34;filter&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;term&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;productID&#34;</span>: <span style=color:#4e9a06>&#34;XHDK-A-1293-#fJ3&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>]</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


PUT /my_store 
<span style=color:#ce5c00;font-weight:700>{</span>     
  <span style=color:#4e9a06>&#34;mappings&#34;</span> : <span style=color:#ce5c00;font-weight:700>{</span>         
      <span style=color:#4e9a06>&#34;properties&#34;</span> : <span style=color:#ce5c00;font-weight:700>{</span>                 
        <span style=color:#4e9a06>&#34;productID&#34;</span> : <span style=color:#ce5c00;font-weight:700>{</span>                     
          <span style=color:#4e9a06>&#34;type&#34;</span> : <span style=color:#4e9a06>&#34;keyword&#34;</span>
        <span style=color:#ce5c00;font-weight:700>}</span>            
        <span style=color:#ce5c00;font-weight:700>}</span>        
      <span style=color:#ce5c00;font-weight:700>}</span>     
    <span style=color:#ce5c00;font-weight:700>}</span>


POST /my_store/_doc/_bulk 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;_id&#34;</span>: <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#ce5c00;font-weight:700>}}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;price&#34;</span> : 10, <span style=color:#4e9a06>&#34;productID&#34;</span> : <span style=color:#4e9a06>&#34;XHDK-A-1293-#fJ3&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;_id&#34;</span>: <span style=color:#0000cf;font-weight:700>2</span> <span style=color:#ce5c00;font-weight:700>}}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;price&#34;</span> : 20, <span style=color:#4e9a06>&#34;productID&#34;</span> : <span style=color:#4e9a06>&#34;KDKE-B-9947-#kL5&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;_id&#34;</span>: <span style=color:#0000cf;font-weight:700>3</span> <span style=color:#ce5c00;font-weight:700>}}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;price&#34;</span> : 30, <span style=color:#4e9a06>&#34;productID&#34;</span> : <span style=color:#4e9a06>&#34;JODL-X-1937-#pV7&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;_id&#34;</span>: <span style=color:#0000cf;font-weight:700>4</span> <span style=color:#ce5c00;font-weight:700>}}</span> 
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;price&#34;</span> : 30, <span style=color:#4e9a06>&#34;productID&#34;</span> : <span style=color:#4e9a06>&#34;QQPX-R-3956-#aD8&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span>



GET /us-tweet/_search
<span style=color:#ce5c00;font-weight:700>{</span> 
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match_all&#34;</span>: <span style=color:#ce5c00;font-weight:700>{}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
  , <span style=color:#4e9a06>&#34;_source&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span><span style=color:#4e9a06>&#34;tweet&#34;</span>, <span style=color:#4e9a06>&#34;date&#34;</span><span style=color:#ce5c00;font-weight:700>]</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /us-tweet

GET /us-tweet/_search?search_type<span style=color:#ce5c00;font-weight:700>=</span>dfs_query_then_fetch

<span style=color:#8f5902;font-style:italic># explain API to understand why one particular document matched or, more important, why it didn&#39;t match .</span>
GET /us-tweet/_doc/12/_explain 
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;bool&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;filter&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;term&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;user_id&#34;</span>: <span style=color:#4e9a06>&#34;3&#34;</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>}</span>,
      <span style=color:#4e9a06>&#34;must&#34;</span>: 
        <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
            <span style=color:#4e9a06>&#34;tweet&#34;</span>: <span style=color:#4e9a06>&#34;honeymoon&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /_search?explain<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>true</span>
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;tweet&#34;</span>: <span style=color:#4e9a06>&#34;honeymoon&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;bool&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;must&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;tweet&#34;</span>: <span style=color:#4e9a06>&#34;managee text search&#34;</span>
        <span style=color:#ce5c00;font-weight:700>}</span> 
      <span style=color:#ce5c00;font-weight:700>}</span>,
      <span style=color:#4e9a06>&#34;filter&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span>
        <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;term&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;user_id&#34;</span>: <span style=color:#4e9a06>&#34;2&#34;</span>
          <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>]</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>



GET /us-tweet/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;bool&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;filter&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;term&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;user_id&#34;</span>: <span style=color:#0000cf;font-weight:700>1</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>}</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>,
  <span style=color:#4e9a06>&#34;sort&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;date&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;order&#34;</span>: <span style=color:#4e9a06>&#34;desc&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


GET /_search

PUT /us-user
PUT /gb-user
PUT /gb-tweet
PUT /us-tweet

POST /_bulk
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;us-user&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;1&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;email&#34;</span>:<span style=color:#4e9a06>&#34;john@smith.com&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;John Smith&#34;</span>,<span style=color:#4e9a06>&#34;username&#34;</span>:<span style=color:#4e9a06>&#34;@john&#34;</span><span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;gb-user&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;2&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;email&#34;</span>:<span style=color:#4e9a06>&#34;mary@jones.com&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;Mary Jones&#34;</span>,<span style=color:#4e9a06>&#34;username&#34;</span>:<span style=color:#4e9a06>&#34;@mary&#34;</span><span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;gb-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;3&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-13&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;Mary Jones&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;Elasticsearch means full text search has never been so easy&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:2<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;us-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;4&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-14&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;John Smith&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;@mary it is not just text, it does everything&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:1<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;gb-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;5&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-15&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;Mary Jones&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;However did I manage before Elasticsearch?&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:2<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;us-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;6&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-16&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;John Smith&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;The Elasticsearch API is really easy to use&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:1<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;gb-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;7&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-17&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;Mary Jones&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;The Query DSL is really powerful and flexible&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:2<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;us-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;8&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-18&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;John Smith&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:1<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;gb-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;9&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-19&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;Mary Jones&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;Geo-location aggregations are really cool&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:2<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;us-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;10&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-20&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;John Smith&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;Elasticsearch surely is one of the hottest new NoSQL products&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:1<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;gb-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;11&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-21&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;Mary Jones&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;Elasticsearch is built for the cloud, easy to scale&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:2<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;us-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;12&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-22&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;John Smith&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;Elasticsearch and I have left the honeymoon stage, and I still love her.&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:1<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;gb-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;13&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-23&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;Mary Jones&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;So yes, I am an Elasticsearch fanboy&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:2<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;create&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_index&#34;</span>:<span style=color:#4e9a06>&#34;us-tweet&#34;</span>,<span style=color:#4e9a06>&#34;_id&#34;</span>:<span style=color:#4e9a06>&#34;14&#34;</span><span style=color:#ce5c00;font-weight:700>}}</span>
<span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;date&#34;</span>:<span style=color:#4e9a06>&#34;2014-09-24&#34;</span>,<span style=color:#4e9a06>&#34;name&#34;</span>:<span style=color:#4e9a06>&#34;John Smith&#34;</span>,<span style=color:#4e9a06>&#34;tweet&#34;</span>:<span style=color:#4e9a06>&#34;How many more cheesy tweets do I have to write?&#34;</span>,<span style=color:#4e9a06>&#34;user_id&#34;</span>:1<span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#8f5902;font-style:italic># Don&#39;t Repeat Yourself</span>
<span style=color:#8f5902;font-style:italic># 出错，从 7.0 开始，一个索引下一个类型</span>
POST /website/_bulk
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;index&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;_type&#34;</span>: <span style=color:#4e9a06>&#34;blog&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span> <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;User logged in&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span>

GET /website/
<span style=color:#8f5902;font-style:italic># 不要其他的元数据</span>
GET /website/blog/123/_source

<span style=color:#8f5902;font-style:italic># 检索文档的一部分 </span>
GET /website/blog/123?_source<span style=color:#ce5c00;font-weight:700>=</span>title,text

GET /website/blog/123?pretty

POST /website/blog/
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;My second Blog entry&#34;</span>  , 
  <span style=color:#4e9a06>&#34;text&#34;</span>: <span style=color:#4e9a06>&#34;still tying this out .... &#34;</span>, 
  <span style=color:#4e9a06>&#34;date&#34;</span>: <span style=color:#4e9a06>&#34;2014/01/02&#34;</span>
  
<span style=color:#ce5c00;font-weight:700>}</span>

PUT /website/blog/123
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;title&#34;</span>: <span style=color:#4e9a06>&#34;My First Blog entry&#34;</span>  , 
  <span style=color:#4e9a06>&#34;text&#34;</span>: <span style=color:#4e9a06>&#34;just tying this out .... &#34;</span>, 
  <span style=color:#4e9a06>&#34;date&#34;</span>: <span style=color:#4e9a06>&#34;2014/01/01&#34;</span>
  
<span style=color:#ce5c00;font-weight:700>}</span>

PUT /website

GET _search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match_all&#34;</span>: <span style=color:#ce5c00;font-weight:700>{}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

PUT /megacorp

PUT /megacorp/employee/1 
<span style=color:#ce5c00;font-weight:700>{</span>     <span style=color:#4e9a06>&#34;first_name&#34;</span> : <span style=color:#4e9a06>&#34;John&#34;</span>,     <span style=color:#4e9a06>&#34;last_name&#34;</span> :  <span style=color:#4e9a06>&#34;Smith&#34;</span>,     <span style=color:#4e9a06>&#34;age&#34;</span> :        25,     <span style=color:#4e9a06>&#34;about&#34;</span> :      <span style=color:#4e9a06>&#34;I love to go rock climbing&#34;</span>,     <span style=color:#4e9a06>&#34;interests&#34;</span>: <span style=color:#ce5c00;font-weight:700>[</span> <span style=color:#4e9a06>&#34;sports&#34;</span>, <span style=color:#4e9a06>&#34;music&#34;</span> <span style=color:#ce5c00;font-weight:700>]</span> 
  
<span style=color:#ce5c00;font-weight:700>}</span>

PUT /megacorp/employee/2 
<span style=color:#ce5c00;font-weight:700>{</span>     <span style=color:#4e9a06>&#34;first_name&#34;</span> :  <span style=color:#4e9a06>&#34;Jane&#34;</span>,     <span style=color:#4e9a06>&#34;last_name&#34;</span> :   <span style=color:#4e9a06>&#34;Smith&#34;</span>,     <span style=color:#4e9a06>&#34;age&#34;</span> :         32,     <span style=color:#4e9a06>&#34;about&#34;</span> :       <span style=color:#4e9a06>&#34;I like to collect rock albums&#34;</span>,     <span style=color:#4e9a06>&#34;interests&#34;</span>:  <span style=color:#ce5c00;font-weight:700>[</span> <span style=color:#4e9a06>&#34;music&#34;</span> <span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>}</span>

PUT /megacorp/employee/3 
<span style=color:#ce5c00;font-weight:700>{</span>     <span style=color:#4e9a06>&#34;first_name&#34;</span> :  <span style=color:#4e9a06>&#34;Douglas&#34;</span>,     <span style=color:#4e9a06>&#34;last_name&#34;</span> :   <span style=color:#4e9a06>&#34;Fir&#34;</span>,     <span style=color:#4e9a06>&#34;age&#34;</span> :         35,     <span style=color:#4e9a06>&#34;about&#34;</span>:        <span style=color:#4e9a06>&#34;I like to build cabinets&#34;</span>,     <span style=color:#4e9a06>&#34;interests&#34;</span>:  <span style=color:#ce5c00;font-weight:700>[</span> <span style=color:#4e9a06>&#34;forestry&#34;</span> <span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>}</span>

GET /megacorp/employee/1

GET /megacorp/employee/_search 

GET /megacorp/employee/_search?q<span style=color:#ce5c00;font-weight:700>=</span>last_name:Smith 

<span style=color:#8f5902;font-style:italic># DSL 查询</span>
GET /megacorp/employee/_search 
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;last_name&#34;</span>: <span style=color:#4e9a06>&#34;Smitch&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


<span style=color:#8f5902;font-style:italic># 年龄大于30岁的员工。</span>

GET /megacorp/employee/_search 
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;bool&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;filter&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;range&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;age&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span> <span style=color:#4e9a06>&#34;gt&#34;</span>: <span style=color:#0000cf;font-weight:700>30</span> <span style=color:#ce5c00;font-weight:700>}</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>}</span>,
      <span style=color:#4e9a06>&#34;must&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;last_name&#34;</span>: <span style=color:#4e9a06>&#34;smitch&#34;</span>
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>}</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /megacorp/employee/_search 
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;about&#34;</span>: <span style=color:#4e9a06>&#34;rock climbing&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


GET /megacorp/employee/_search 
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match_phrase&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;about&#34;</span>: <span style=color:#4e9a06>&#34;rock climbing&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

<span style=color:#8f5902;font-style:italic># 因为我要聚合的字段 「interests」没有进行优化，也类似没有加索引 </span>
<span style=color:#8f5902;font-style:italic># 没有优化的字段 es 默认是禁止聚合/排序操作的。 </span>
PUT /megacorp/_mapping?pretty
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;properties&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;interests&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;type&#34;</span>: <span style=color:#4e9a06>&#34;text&#34;</span>, 
      <span style=color:#4e9a06>&#34;fielddata&#34;</span>: <span style=color:#204a87>true</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

<span style=color:#8f5902;font-style:italic># 让我们找到所有职员中最大的共同点是什么？</span>
GET /megacorp/employee/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;aggs&#34;</span>:<span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;all_interests&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;terms&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;field&#34;</span>: <span style=color:#4e9a06>&#34;interests&#34;</span> <span style=color:#ce5c00;font-weight:700>}</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


GET /megacorp/employee/_search 
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;query&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;match&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;last_name&#34;</span>: <span style=color:#4e9a06>&#34;smith&#34;</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>, 
  <span style=color:#4e9a06>&#34;aggs&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;all_interests&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;terms&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;field&#34;</span>: <span style=color:#4e9a06>&#34;interests&#34;</span>
      <span style=color:#ce5c00;font-weight:700>}</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>

GET /megacorp/employee/_search
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;aggs&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;all_interests&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;terms&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;field&#34;</span>: <span style=color:#4e9a06>&#34;interests&#34;</span>
      <span style=color:#ce5c00;font-weight:700>}</span>, 
      <span style=color:#4e9a06>&#34;aggs&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
        <span style=color:#4e9a06>&#34;avg_age&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
          <span style=color:#4e9a06>&#34;avg&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span><span style=color:#4e9a06>&#34;field&#34;</span>: <span style=color:#4e9a06>&#34;age&#34;</span><span style=color:#ce5c00;font-weight:700>}</span> 
        <span style=color:#ce5c00;font-weight:700>}</span>
      <span style=color:#ce5c00;font-weight:700>}</span>
    <span style=color:#ce5c00;font-weight:700>}</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


PUT /blogs
<span style=color:#ce5c00;font-weight:700>{</span>
  <span style=color:#4e9a06>&#34;settings&#34;</span>: <span style=color:#ce5c00;font-weight:700>{</span>
    <span style=color:#4e9a06>&#34;number_of_shards&#34;</span>: 3,
    <span style=color:#4e9a06>&#34;number_of_replicas&#34;</span>: <span style=color:#0000cf;font-weight:700>1</span>
  <span style=color:#ce5c00;font-weight:700>}</span>
<span style=color:#ce5c00;font-weight:700>}</span>


GET /_cluster/health

</code></pre></div><h2 id=nginx配置>nginx配置</h2>
<p>(location =) > (location 完整路径) > (location ^~ 路径) > (location ~,~* 正则顺序) > (location 部分起始路径) > (/)<br>
<a href=http://seanlook.com/2015/05/17/nginx-location-rewrite/>更多详情</a></p>
<h2 id=tornado>tornado</h2>
<p>sqlalchemy 和 tornado的结合： session管理放在了每次的request的请求中处理为最佳，以及每次请求经来时，实例化session, 请求结束后, 将session关闭<br>
scoped_session session 注册表，从中取用和还取，并保证多次取用的为统一session<br>
此处的sqlalchemy的数据库查询，并不是异步，当使用tornado 的异步特性时，遇到查询数据库慢时，还是会阻塞的，此时我们更多的需要考虑的</p>
<p><a href=https://segmentfault.com/a/1190000008650442>我心中的 tornado 最佳实践</a></p>
<p><a href=https://groups.google.com/forum/#!msg/python-tornado/t-Tbn7n0IZY/ehV_o8uU3xgJ>handle blocking tasks in Tornado</a><br>
其中Ben Darnell回复的,</p>
<blockquote>
<p>A ThreadPoolExecutor is the recommended way to use blocking functions that cannot be easily rewritten as non-blocking. When you call <code>yield self._exe(n)</code>, that handler will be suspended and the main thread will return to the HTTPServer so it is free to handle other requests. The suspended handler will wake up when the task is completed and the IOLoop is not busy.
The new thread pool is created by the main thread but is not &ldquo;in&rdquo; the thread. Thread pools should generally be either global or class variables; not instance variables. It is a good practice to have one thread pool for each kind of resource: e.g. one thread pool for database queries and second pool for image processing. This lets you set and monitor separate limits for each one.</p>
</blockquote>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>tornado.web</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>tornado.concurrent</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>run_on_executor</span>
<span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>concurrent.futures</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>ThreadPoolExecutor</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>time</span>

<span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>MainHandler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tornado</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>web</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>RequestHandler</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>write</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Hello, world </span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>&#34;</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#000>time</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>time</span><span style=color:#000;font-weight:700>())</span>


<span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>SleepHandler</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tornado</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>web</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>RequestHandler</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#5c35cc;font-weight:700>@property</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>executor</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>application</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>executor</span>

    <span style=color:#5c35cc;font-weight:700>@tornado</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>gen</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>coroutine</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>n</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#000>n</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#204a87;font-weight:700>yield</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>_exe</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>write</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;Awake! </span><span style=color:#4e9a06>%s</span><span style=color:#4e9a06>&#34;</span> <span style=color:#ce5c00;font-weight:700>%</span> <span style=color:#000>time</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>time</span><span style=color:#000;font-weight:700>())</span>
        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>finish</span><span style=color:#000;font-weight:700>()</span>

    <span style=color:#5c35cc;font-weight:700>@run_on_executor</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>_exe</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>n</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#4e9a06>&#34;&#34;&#34;
</span><span style=color:#4e9a06>        This is a long time job and may block the server,such as a complex DB query or Http request.
</span><span style=color:#4e9a06>        &#34;&#34;&#34;</span>
        <span style=color:#000>time</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>sleep</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>float</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>n</span><span style=color:#000;font-weight:700>))</span>
        <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>n</span>


<span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>App</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tornado</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>web</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Application</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#000>handlers</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span>
                        <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>r</span><span style=color:#4e9a06>&#34;/&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>MainHandler</span><span style=color:#000;font-weight:700>),</span>
                        <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>r</span><span style=color:#4e9a06>&#34;/sleep/(\d+)&#34;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>SleepHandler</span><span style=color:#000;font-weight:700>),</span>
                    <span style=color:#000;font-weight:700>]</span>
        <span style=color:#000>tornado</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>web</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Application</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>handlers</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>executor</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>ThreadPoolExecutor</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>max_workers</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>60</span><span style=color:#000;font-weight:700>)</span>


<span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>__name__</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#34;__main__&#34;</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>application</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>App</span><span style=color:#000;font-weight:700>()</span>
    <span style=color:#000>application</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>listen</span><span style=color:#000;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>8888</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>tornado</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ioloop</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>IOLoop</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>instance</span><span style=color:#000;font-weight:700>()</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>start</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><h2 id=python>python</h2>
<p>MD，最喜欢的还是贴好文章的链接<br>
<a href=http://www.wklken.me/posts/2013/07/18/python-translate-yield.html>PYTHON中YIELD的解释</a>: 这个代码解释详细了，什么是“鸭子类型" (duck typing)</p>
<p>再来一个链接: <a href=http://nvie.com/posts/iterators-vs-generators/>Iterables vs. Iterators vs. Generators</a> 原来generators还有两种类型(Type): generator functions and generator expressions</p>
<blockquote>
<p>这真是一个很长的story啊</p>
</blockquote>
<p>futrue使用<br>
Futrue模式的主要使用场景： 当前线程需要依赖另一线程的返回数据并且处理数据的线程又相当耗时，那么Futrue模式就可以使主线程提交数据请求给另一线程处理业务逻辑，等需要时将另一线程返回，很好的利用了等待时间<br>
<a href=https://manjusaka.itscoder.com/2017/11/28/something-about-concurrent-future/>Python concurrent.future 使用教程及源码初剖</a></p>
<p>yield 协程<br>
yield并没有指定当前进程要将执行权利移交给谁，只是放弃运行权利，至于下面由谁来运行，完全看进程调度schedule();多用于I/O等待时，进程短暂wait，但是并没有退出运行队列。<br>
<a href=https://blog.csdn.net/sunnybeike/article/details/6947137> 进程管理之yield </a><br>
[ Yield 和 Coroutine ] (<a href=http://wsfdl.com/python/2016/11/13/yield_and_croutine.html>http://wsfdl.com/python/2016/11/13/yield_and_croutine.html</a>)</p>
<p>Python (at least in the CPython implementation) has a Global Interpreter Lock which prevents multiple threads from executing Python code at the same time. In particular, anything which runs in a single Python opcode is uninterruptible unless it calls a C function which explicitly releases the GIL. A large exponentation with ** holds the GIL the whole time and thus blocks all other python threads, while a call to bcrypt() will release the GIL so other threads can continue to work.</p>
<p><a href=http://python.jobbole.com/87743/>深入理解 GIL：如何写出高性能及线程安全的 Python 代码 </a> 介绍了GIL</p>
<h2 id=参考>参考</h2>
<p>[1] Clinton Gormley and Zachary Tong: Elasticsearch: The Definitive Guide</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-1ca7c71430af3a9f7980b371807adbe9>8 - Daily 0607</h1>
<h1 id=python-import>python import</h1>
<p><a href=http://codingpy.com/article/python-import-101/>Python导入模块的几种姿势</a> 文中介绍了如下几种导入：</p>
<ul>
<li>常规导入(regular imports)</li>
<li>使用from语句导入</li>
<li>相对导入(relative imports)</li>
<li>可选导入(optional imports)</li>
<li>本地/局部导入(local imports)</li>
<li>导入注意事项 ： 循环导入(circular imports) 和 覆盖导入(shadowed imports)</li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-42dc9af5b2030b909b1e6cdc427a47f8>9 - Daily 0612</h1>
<h1 id=使用pip-packege拆分项目>使用pip packege拆分项目</h1>
<h2 id=pip-安装git仓库>pip 安装git仓库</h2>
<p><a href=https://stackoverflow.com/questions/20101834/pip-install-from-git-repo-branch>pip install from git repo branch </a> 介绍几种导入安装方式</p>
<h2 id=为什么不使用git-submodule方式来拆分项目>为什么不使用git submodule方式来拆分项目</h2>
<p>更新子项目的方式使运维工作变得麻烦。</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-11c618c16edab1f3526f5402311e74c4>10 - Daily 0813</h1>
<h1 id=区块链>区块链</h1>
<h2 id=参考资料>参考资料</h2>
<p><a href="https://www.ibm.com/developerworks/community/blogs/3302cc3b-074e-44da-90b1-5055f1dc0d9c/entry/opentech-blockchain?lang=zh">区块链和 HyperLedger 系列课程（共十讲</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-79d997335fbe9696d3f0e05d03d6384e>11 - Daily 0821 chrome app/extension</h1>
<h2 id=入门>入门</h2>
<h2 id=深入>深入</h2>
<h2 id=扩展>扩展</h2>
<h2 id=参考>参考</h2>
<p><a href=https://crxdoc-zh.appspot.com/apps/first_app>app 创建第一个应用</a><br>
<a href=https://github.com/SingleClickApps/disable-cookies>disable cookies</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4a62dfb087d1255a1733eafeca76273f>12 - Daily 10/09</h1>
<h2 id=学习>学习</h2>
<h3 id=vue>Vue</h3>
<p>Directive <a href=https://vuejs.org/v2/guide/custom-directive.html>官网介绍</a></p>
<h3 id=webpack>webpack</h3>
<p><a href=https://github.com/webpack/webpack/issues/1788#issuecomment-166759703>webpack babel对import不一样</a> 这个问题很困惑<code>TODO</code></p>
<p><a href=https://stackoverflow.com/questions/43814830/destructuring-a-default-export-object>Destructuring a default export object</a> 这个问题正是我的问题</p>
<p><a href=https://blog.kentcdodds.com/misunderstanding-es6-modules-upgrading-babel-tears-and-a-solution-ad2d5ab93ce0>Misunderstanding ES6 Modules, Upgrading Babel, Tears, and a Solution</a> 做个总结</p>
<h3 id=es6>ES6</h3>
<p><a href=https://aotu.io/notes/2016/09/22/es6-import-with-babel/index.html>通过 Babel 使用 ES6 的 import</a></p>
<h3 id=mobile-web>mobile web</h3>
<p><a href=http://framework7.taobao.org/>Framework7 特色的HTML框架 可以创建精美的iOS应用</a></p>
<p><a href=https://gist.github.com/ximan/9778174>reset.css</a> 重置移动设备的css</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b208d2437975111a7aff23977621a97d>13 - Daily 10/15 配置https</h1>
<p>阿里云免费签发的CA证书，然后下载到服务器，配置nginx</p>
<pre tabindex=0><code>  ssl_certificate   cert/213970811020013.pem;
  ssl_certificate_key  cert/213970811020013.key;
</code></pre><p>对80端口的域名访问做好跳转</p>
<pre tabindex=0><code>server {
	listen 80;
    server_name server.com www.server.com;
    return 301 https://www.server.com$request_uri;
}

</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4ae1457ece262608778b9af9debde46d>14 - Daily 10/16</h1>
<h2 id=学习>学习</h2>
<h3 id=uuid>UUID</h3>
<p><a href=https://github.com/simongong/js-stackoverflow-highest-votes/blob/master/questions1-10/how-to-create-a-UUID-in-javascript.md>How to create a GUID / UUID in Javascript?</a> 很全面的UUID资料</p>
<h3 id=vue-统一的数据请求接口>VUE 统一的数据请求接口</h3>
<p><a href=https://github.com/vuejs/vuex/blob/dev/examples/shopping-cart/api/shop.js>shop.js</a> 接口案例 <a href=https://vuex.vuejs.org/zh-cn/structure.html>项目结构</a></p>
<h3 id=web>Web</h3>
<p><a href=https://www.zhihu.com/question/24918722>html5 控制 andorid端 input输入框 不弹出输入法？</a> 前端input 不弹输入框</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#0000cf;font-weight:700>1</span><span style=color:#a40000>）</span><span style=color:#000>onfocus</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;this.blur();&#39;</span>

<span style=color:#0000cf;font-weight:700>2</span><span style=color:#a40000>）</span><span style=color:#000>readOnly</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;readOnly&#39;</span>

</code></pre></div><p><a href=https://stackoverflow.com/questions/41097909/dynamic-component-click-event-in-vue>Dynamic component click event in Vue</a> 动态组件添加click事件，使用<code>@click.native</code></p>
<p><a href=http://justcoding.iteye.com/blog/2032627>所不知的 CSS ::before 和 ::after 伪元素用法</a> 多看几次<code>TODO</code></p>
<p><a href=http://www.zhangxinxu.com/wordpress/2012/04/inline-block-space-remove-%E5%8E%BB%E9%99%A4%E9%97%B4%E8%B7%9D/>去除inline-block元素间间距的N种方</a> 两个元素之间没有任何元素，却有空格的解决办法，是inline-block本身存在的问题</p>
<p><a href=https://github.com/evrone/postcss-px-to-viewport>postcss</a> postcss-px-to-viewport 解决设计稿到代码的像素的转化 <code>TODO</code>没有webpack加入方式</p>
<p><a href=https://www.w3cplus.com/css/vw-for-layout.html>再聊移动端页面的适配</a> 移动页面的适配最新解决方式</p>
<p><a href=https://www.w3cplus.com/css/the-important-css-declaration-how-and-when-to-use-it.html>如何和何时使用CSS的!important</a> 解释了为什么使用 !important</p>
<p><a href=http://light7.org/examples/>light7</a> 优秀的移动端框架</p>
<p><a href=http://cubic-bezier.com/#.72,.17,.44,.54>cubic</a> 很酷 <code>TODO</code></p>
<p><a href=https://github.com/purifycss/purifycss>purifycss</a> 去掉无用的css</p>
<p><a href=https://github.com/sagalbot/vue-select/tree/master/docs/components>vue select</a> 下拉选项vue集成</p>
<p><a href=https://github.com/vum-team/vum>vue demo</a> 结构清晰，耦合很小</p>
<p><a href=https://github.com/innofed/ufe-spec>团队编码规范</a> 参考学习</p>
<h3 id=vtiger>Vtiger</h3>
<p><a href=https://wiki.vtiger.com/index.php/Webservices_tutorials#API_Call_characterstics>vtiger Webservice tutorials</a> api修改crm数据</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-639931eb8e570838e56327173dc99821>15 - Daily 10/18</h1>
<h2 id=学习>学习</h2>
<h3 id=eslint>Eslint</h3>
<p><a href=https://eslint.org/docs/rules/quotes>enforce the consistent use of either backticks, double, or single quotes</a> 禁用quotes规则，在文件头</p>
<pre tabindex=0><code>/* eslint-disable quotes */
</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b58d2181d1aacb4305b0c2a0a310c79c>16 - Daily 10/19 三个月</h1>
<h2 id=学习>学习</h2>
<h3 id=webpack-express-配置proxy-http---https-修改header参数>webpack express 配置proxy (http -> https), 修改header参数</h3>
<p>webpack dev环境下使用中间件<a href=https://github.com/chimurai/http-proxy-middleware>http=proxy-middleware</a><br>
通过配置参数<em>option.onProxyReq</em>来设置</p>
<pre tabindex=0><code>function onProxyReq(proxyReq, req, res) {
    // add custom header to request
    proxyReq.setHeader('x-added', 'foobar');
    // or log the req
}
</code></pre><p><a href=https://github.com/nodejitsu/node-http-proxy/blob/master/examples/http/proxy-http-to-https.js>node-http-proxy</a> 很多代理的示例，参考用</p>
<pre tabindex=0><code>httpProxy.createProxyServer({
  target: 'https://google.com',
  agent  : https.globalAgent,
  headers: {
    host: 'google.com'
  }
}).listen(8011);

</code></pre><p><a href=https://github.com/nodejitsu/node-http-proxy#setup-a-stand-alone-proxy-server-with-proxy-request-header-re-writing>https->http 或者 https->https</a> 配示例</p>
<h3 id=qs>Qs</h3>
<p><code>qs</code> 处理http参数的库，用上了很方便</p>
<h3 id=vue>Vue</h3>
<p>编程式的导航</p>
<pre tabindex=0><code>router.push({ path: 'home' })
</code></pre><p>自定义指令</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#8f5902;font-style:italic>// 注册一个全局自定义指令 v-focus
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#000>Vue</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>directive</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;focus&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#8f5902;font-style:italic>// 当绑定元素插入到 DOM 中。
</span><span style=color:#8f5902;font-style:italic></span>  <span style=color:#000>inserted</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>el</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#8f5902;font-style:italic>// 聚焦元素
</span><span style=color:#8f5902;font-style:italic></span>    <span style=color:#000>el</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>focus</span><span style=color:#000;font-weight:700>()</span>
  <span style=color:#000;font-weight:700>}</span>
<span style=color:#000;font-weight:700>})</span>
</code></pre></div><h3 id=eslint>ESLint</h3>
<p><a href=http://eslint.cn/docs/rules/>Rules</a></p>
<h3 id=css-切图>CSS 切图</h3>
<p><a href=https://segmentfault.com/a/1190000009709719>页面制作（切图）第一章</a> 从sketch切图</p>
<p><a href=http://www.infoq.com/cn/articles/netease-ios-vision-to-app#anch136359>从视觉到App：网易有钱iOS项目切图与适配实践</a> 这个项目过程，谁做什么事情很清楚</p>
<p><a href=http://www.uisdc.com/sketch-canvas-smaller>为何sketch预置画布尺寸比真实分辨率小？</a> md再看</p>
<p><a href=https://jinlong.github.io/2015/05/24/css-retina-hairlines/>Retina屏的移动设备如何实现真正1px的线？</a> <code>TODO</code></p>
<p><a href=https://github.com/modood/Administrative-divisions-of-China>中华人民共和国行政区划：省份、城市、区县、乡镇（街道）</a> 很齐全呀</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-72467628488feb8684a76493e89c7548>17 - Daily 10/24</h1>
<h2 id=学习>学习</h2>
<h3 id=vue>Vue</h3>
<p>[form validation表单验证](<a href=https://www.zhihu.com/question/37099220>https://www.zhihu.com/question/37099220</a>） 使用va.js 方便验证</p>
<p><a href=https://cn.vuejs.org/v2/guide/custom-directive.html#%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0>自定义指令</a> 各种参数说明</p>
<h3 id=csshtml>CSS+HTML</h3>
<p><a href=http://yijiebuyi.com/blog/957bfb7468d2cc53d72ddebc2b5d39d3.html>HTML5页面滑动到最底部触发内容加载 javascript实现</a></p>
<blockquote>
<p>文档高度 这是整个页面的高度
可视窗口高度 这是你看到的浏览器可视屏幕高度
滚动条滚动高度 滚动条下滑过的高度</p>
</blockquote>
<p><a href="http://blog.163.com/prevBlogPerma.do?host=zctya&srl=12091782010321346288&mode=prev">CSS: 解决Div float后，父Div无法高度自适应的问题 </a> 使用clear:both解决</p>
<h3 id=js>js</h3>
<p>箭头函数没有它自己的this值，箭头函数内的this值继承自外围作用域。<br>
<a href=http://www.infoq.com/cn/articles/es6-in-depth-arrow-functions>深入浅出ES6（七）：箭头函数 Arrow Functions</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-51864cb2d6aa3f64fe663dbf073b454f>18 - Daily 10/30</h1>
<h2 id=学习>学习</h2>
<h3 id=vue>Vue</h3>
<p>vue中input绑定回车事件</p>
<pre tabindex=0><code>@keyup.13=&quot;search&quot;
</code></pre><p><a href=http://www.cnblogs.com/lzrabbit/archive/2011/10/23/2221643.html>javascript 验证身份的有效性</a></p>
<h3 id=css>CSS</h3>
<p><code>:first-child</code> 使用:first-child伪类时一定要保证前面没有兄弟节点，把h1去掉就可以；或者使用div包住article，然后css：div article:first-child</p>
<p><a href=http://www.cnblogs.com/lovesueee/p/4618454.html>移动端高清、多屏适配方案</a> 1)Retina下图片高清问题, 2)retina下，border: 1px问题,3)多屏适配布局问题,</p>
<h3 id=python>python</h3>
<p>python 命令行传参，避免敏感信息硬编码在代码中</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>argparse</span>

<span style=color:#000>parser</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>argparse</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>ArgumentParser</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>description</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;Process some integers.&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>parser</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>add_argument</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;integers&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>metavar</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;N&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#204a87>type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>nargs</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;+&#39;</span><span style=color:#000;font-weight:700>,</span>
                    <span style=color:#000>help</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;an integer for the accumulator&#39;</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>args</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>parser</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>parse_args</span><span style=color:#000;font-weight:700>()</span>
</code></pre></div><p>split 第一个参数默认值、所有的空字符(空格、换行（\n)、制表符(\t), 第二个参数表示分隔次数</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87>str</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#4e9a06>&#34;Line1-abcdef </span><span style=color:#4e9a06>\n</span><span style=color:#4e9a06>Line2-abc </span><span style=color:#4e9a06>\n</span><span style=color:#4e9a06>Line4-abcd&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87>print</span> <span style=color:#204a87>str</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>split</span><span style=color:#000;font-weight:700>(</span> <span style=color:#000;font-weight:700>);</span>
<span style=color:#204a87>print</span> <span style=color:#204a87>str</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>split</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39; &#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span> <span style=color:#000;font-weight:700>);</span>
</code></pre></div><p>  
<a href=http://python3-cookbook.readthedocs.io/zh_CN/latest/c02/p08_regexp_for_multiline_partterns.html>多行匹配模式</a><br>
这个问题很典型的出现在当你用点(.)去匹配任意字符的时候，忘记了点(.)不能匹配换行符的事实。<br>
re.compile() 函数接受一个标志参数叫 re.DOTALL</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>comment</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>re</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>compile</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>r</span><span style=color:#4e9a06>&#39;/\*(.*?)\*/&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>re</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>DOTALL</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h3 id=gerrit>Gerrit</h3>
<p><a href=http://gotgit.readthedocs.io/en/latest/05-git-server/055-gerrit.html>Gerrit代码审核服务器</a> 详细的文章介绍
<a href=http://whjgithub.github.io/2015/07/22/2015-07-22-225035/>Gerrit代码审查-简介</a></p>
<p><a href=https://stackoverflow.com/questions/14789666/import-repository-from-git-to-gerrit>git仓库导入到gerrit</a></p>
<blockquote>
<p>I imported many GIT projects to gerrit, the easiest way I found was to copy the xy.git Directory of the git repository to the directory where gerrit deposits the git repos. After restart of gerrit process the new project is in the list of new projects and you can edit description and access rights.</p>
</blockquote>
<p><a href=https://stackoverflow.com/questions/30503447/gerrit-admin-does-not-have-access-database-capability>Gerrit内置数据库H2访问权限修改</a>
修改project.config文件</p>
<pre tabindex=0><code>[capability]
       accessDatabase = group Administrators
</code></pre><p><a href=http://lipeng1667.github.io/2017/01/18/gerrit-guide/>Gerrit工作流程及使用手册</a> 介绍gerrit安装http</p>
<p><a href=http://www.vogella.com/tutorials/Gerrit/article.html#gerritsetup_repository>Gerrit英文学习资料</a></p>
<h3 id=git>GIT</h3>
<p>修改远程仓库地址：</p>
<pre tabindex=0><code>git remote set-url origin [url]

</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d170c7dffbbbee2dd73fe23d5e9f7249>19 - Daily 1018 vim go + Ycm</h1>
<p>记录配置vim+go开发环境de折腾过程.</p>
<h2 id=输入点号后没有任何提示不知所措甚至怀疑就到这里了>输入".&ldquo;点号后没有任何提示,不知所措，甚至怀疑就到这里了。</h2>
<p>当没有日志，我无从下手解决问题。<br>
我更新了所有的go库，重装了go-code/vim-go，依然没有解决，没有给我任何错误提示。<br>
开始怀疑“人生苦短，我用python&rdquo;，<br>
不服输，爱折腾。</p>
<p>我重装了vim-go/ gocode之后，我开始怀疑ycm这个玩意。</p>
<p>原来真的是需要升级，而且安装时要注意go</p>
<p>"""
/.vim/bundle/YouCompleteMe$ ../install.sh &ndash;clang-completer &ndash;go-completer</p>
<p>"""
安装时，加上go-completer的参数</p>
<p>最后重启了 ycm服务器<br>
大功告成!!!</p>
<h2 id=参考>参考</h2>
<p><a href=https://github.com/fatih/vim-go/issues/659>Autocomplete stopped working</a> 当我看完这个时，我确定了gocode没有问题。问题可能在ycm;</p>
<p><a href=https://blog.csdn.net/haidonglin/article/details/78411968>YouCompleteMe 支持 golang vim 自动补全</a></p>
<p><a href=http://qwding.github.io/post/vim_golang/>用VIM写GOLANG踩坑</a> 这里提到为什么go自动提示的那么慢，原因就在go而非ycm, 最后autobuild的操作置为false</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c121e9bd4252f17d6df7f51fad46f50a>20 - Daily 11.08 Docker安装</h1>
<h3 id=环境>环境</h3>
<pre tabindex=0><code>Distributor ID:	Ubuntu
Description:	Ubuntu 14.04.5 LTS
Release:	14.04
Codename:	trusty
</code></pre><h3 id=install>Install</h3>
<p><a href=https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/>Get Docker CE for Ubuntu</a> 官方教程</p>
<h4 id=安装前>安装前</h4>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>sudo apt-get install <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>  linux-image-extra-<span style=color:#204a87;font-weight:700>$(</span>uname -r<span style=color:#204a87;font-weight:700>)</span> <span style=color:#4e9a06>\
</span><span style=color:#4e9a06></span>  linux-image-extra-virtual

</code></pre></div><h3 id=docker>docker</h3>
<p><a href=https://yeasy.gitbooks.io/docker_practice/content/compose/yml_ref.md>docker中文教程</a> 初学者必看,很有用呀</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-64dc87cf8322fe024db1792709e6060b>21 - Daily 11/03</h1>
<h2 id=学习>学习</h2>
<h3 id=command-t>command-t</h3>
<p>mac 上command-t 依赖的ruby 的版本与vim的版本不一样：</p>
<ul>
<li>vim安装通过brew来安装的，依赖的brew中的ruby</li>
<li>command-t生成Makefile文件的时候依赖系统环境下ruby</li>
<li>系统环境下ruby根据$path路径查找:/usr/local/bin;/usr/bin等等</li>
<li>通过软链接brew下的ruby版本号到/usr/local/bin目录下即可，修改系统环境下ruby版本</li>
<li>重新编译，开始享受vim下查找文件的便利吧</li>
</ul>
<h3 id=gerrit>Gerrit</h3>
<p><a href=http://zengestudy.blog.51cto.com/1702365/1774176>Gerrit 权限控制详细介绍</a> forge author,和 forge committer这个有用</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-57b85631ef070b92b6eaadec0585d0ce>22 - Daily 1104</h1>
<h2 id=学习>学习</h2>
<h3 id=gerrit>Gerrit</h3>
<p><a href=http://zengestudy.blog.51cto.com/1702365/1774176> 5、Gerrit权限控制</a> 详细的权限控制<br>
<a href=http://www.vogella.com/tutorials/Gerrit/article.html#gerrit_problems>Gerrit code review - Tutorial</a> 留着慢慢看吧</p>
<h3 id=python>Python</h3>
<p><a href=https://stackoverflow.com/questions/18176733/python-xml-pretty-print-not-working>python xml pretty print not working</a> 配置xml字符解析</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>
<span style=color:#000>mport</span> <span style=color:#000>StringIO</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>lxml.etree</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>etree</span>

<span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>prettify</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>xml_text</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#4e9a06>&#34;&#34;&#34;Pretty prints xml.&#34;&#34;&#34;</span>
    <span style=color:#000>parser</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>etree</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>XMLParser</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>remove_blank_text</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>file_obj</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>StringIO</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>StringIO</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>xml_text</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000>tree</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>etree</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>parse</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>file_obj</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>parser</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>etree</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>tostring</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tree</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>pretty_print</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>True</span><span style=color:#000;font-weight:700>)</span>

</code></pre></div><h3 id=web>Web</h3>
<p><a href=https://docs.docker.com/engine/installation/#supported-platforms>页面anchor随着内容变化</a> 这个很有必要，当内容太长的时候</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6df3950e09f1ed7855c966a0b3a9511d>23 - Daily 1110 DOCKER部署实践总结</h1>
<h2 id=学习>学习</h2>
<p>总算把docker整完了</p>
<h3 id=dockerfile>Dockerfile</h3>
<p>镜像构建文件，</p>
<blockquote>
<p>Dockerfile 是一个文本文件，其内包含了一条条的指令(Instruction)，每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。</p>
</blockquote>
<p><a href=https://github.com/yeasy/docker_practice/tree/master/image/dockerfile>docker_practice github 上dockerfile中文介绍</a> 讲的很详细</p>
<p>查看别人是怎么写Dockerfile：上docker hub上搜索官方的镜像，对应有github仓库地址，查看构建文件.<br>
比如redis构建文件Dockerfile: <a href=https://github.com/docker-library/redis/blob/29b44c477011c5450dd89fd41af4c04e0c71e5b2/4.0/32bit/Dockerfile>Dockerfile</a></p>
<p>看完就知道redis的数据库文件放在什么位置，redis配置文件在哪里，然后可以数据迁移了</p>
<h3 id=redis>redis</h3>
<p><a href=https://mengkang.net/424.html>redis 数据迁移笔记</a></p>
<h3 id=docker-compose>docker-compose</h3>
<p>为什么容器服务器启动了，<code>docker-compose ps </code> 查看端口也打开，为什么连接的时候出现connect refused.</p>
<pre tabindex=0><code>docker rm 容器
</code></pre><p>然后build过程中加上 &ndash;no-cache</p>
<h3 id=docker>Docker</h3>
<p>为了检查构建的镜像是否成功，需要进入容器检查文件
问题是如何进Docker容器了：</p>
<p><a href=http://warjiang.github.io/devcat/2016/11/28/%E5%87%A0%E7%A7%8D%E8%AE%BF%E9%97%AEDocker%E5%AE%B9%E5%99%A8%E7%9A%84%E6%96%B9%E6%B3%95/> 几种访问Docker容器的方法</a></p>
<p>attach 居然卡死，不知道为何/</p>
<p>换种方式,</p>
<pre tabindex=0><code>//查看已经在运行的容器ID
docker ps -a
//通过exec命令对指定的容器执行bash
docker exec -it 31ced27e1684 /bin/bash

</code></pre><p><a href=https://github.com/qianlei90/Blog/issues/35>深入了解DOCKER</a> 深入，<code>TODO</code></p>
<h3 id=docker-nginx>Docker nginx</h3>
<p>需要知道nginx默认配置文件，将自己的配置文件复制粘贴进去</p>
<h3 id=docker-mysql>Docker mysql</h3>
<p><a href=http://www.51woshou.com/?p/6c202e1c3d61>在docker中运行sql文件</a></p>
<p>还有个问题，mysql密码怎么设置，免密码失效</p>
<pre tabindex=0><code>RROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2
</code></pre><p>解决办法是指定<br>
mysql -h localhost -P 3306 &ndash;protocol=tcp -u root</p>
<p><a href=https://github.com/cloudposse/mysql>导入mysql数据的脚本</a> 直接的学习 <code>TODO</code></p>
<h3 id=tornado-redis>Tornado redis</h3>
<p>怎么在Tornado中写redis
<a href=https://github.com/leporo/tornado-redis/blob/master/demos/sockjs/app.py>tornado-redis</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-4e1ee5882d9e62d65822dde8d3e442ea>24 - Daily 1116</h1>
<h2 id=学习>学习</h2>
<h3 id=docker>Docker</h3>
<p>Build, Ship, and Run Any App, Anywhere</p>
<p><a href=https://docs.docker.com/engine/admin/start-containers-automatically/>Use a restart policy</a> 重启规则：</p>
<p>1） no\no-failure\unless-stopped\always <code>TODO</code> on-failure\always 有什么区别</p>
<p><a href=http://wiki.jikexueyuan.com/project/docker-technology-and-combat/supervisor.html>docker 使用 supervisor</a> 配置supervisor在前台运行</p>
<pre tabindex=0><code>[supervisord]
nodaemon=true
</code></pre><p>第一段 supervsord 配置软件本身，使用 nodaemon 参数来运行</p>
<p><a href=https://docs.docker.com/engine/admin/multi-service_container/>Run multiple services in a container</a> 借助了supervisor</p>
<p><a href=https://www.systutorials.com/qa/56/howto-ssh-automatically-add-new-hosts-to-the-list-known-hosts>Howto: ssh automatically add new hosts to the list of known hosts</a> 配置ssh 解决首次登录时候需要加入known hosts的问题</p>
<pre tabindex=0><code>Host 10.*
   StrictHostKeyChecking no
</code></pre><p><a href=https://docs.docker.com/compose/compose-file/compose-file-v2/>Compose file 文档</a></p>
<p><a href=http://blog.csdn.net/scholar_ii/article/details/72191042>如何告诉git哪个私钥要使用？</a> 最终还是直接使用.ssh/id_rsa默认的私钥了</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-163d016ec3b8a0cea24d349cd91a92d0>25 - Daily 1127 MYSQL </h1>
<p><a href=https://www.awaimai.com/1578.html>选择性复制表数据</a> 这个可, 数据库批量处理必备</p>
<h2 id=亿级数据库设计>亿级数据库设计</h2>
<p>详细见 <a href=https://article.itxueyuan.com/7JAoD>千万级汇总查询优化</a></p>
<p><a href=https://cloud.tencent.com/developer/article/1456270>基于Mysql数据库亿级数据的设计</a></p>
<blockquote>
<p>Mysql 单标可以存储10亿级的数据，但这个时候性能非常，项目中大量的实验证明，Mysql单表容量在500万左右，性能处于最佳状态。</p>
</blockquote>
<p>一张表无法搞定，那么</p>
<h3 id=解决办法>解决办法</h3>
<h4 id=分区>分区</h4>
<p>根据<strong>查询索引列</strong>将单表进行分区，当然这些变化对应用层是无法感知的。</p>
<table>
<thead>
<tr>
<th>分区类型</th>
<th>说明</th>
<th>使用频率</th>
</tr>
</thead>
<tbody>
<tr>
<td>Range 分区</td>
<td>根据数值范围，根据时间区间或 ID 区间来切分</td>
<td>较多</td>
</tr>
<tr>
<td>List 分区</td>
<td>离散值集合</td>
<td>较少</td>
</tr>
<tr>
<td>Hash 分区</td>
<td>根据数值取模</td>
<td>较多</td>
</tr>
<tr>
<td>KEY 分区</td>
<td>KEY 分区支持 text 和 BLOB， KEY 分区不允许用用户自定义的表达式分区。</td>
<td>较少</td>
</tr>
</tbody>
</table>
<ul>
<li>Hash 分区，基于给定的分区个数，将数据分配到不同的分区。例如会员表的这种表。 HASH 分区只能针对整数进 HASH，对于非整形的字段只能通过表达式将其转换为整数。</li>
</ul>
<blockquote>
<p>如果基于绑定编号（ID）来做range或者list分区，绑定编号没有实际的业务含义，无法通过它进行查询， 因此，我们剩下了HASH分区和Key分区，HASH分区仅支持int类型的列的分区，且是其中的一列。 如果基于绑定的时间列进行分区，查询依然很慢。基于搜索列来进行分区，可以保证查询的速度。</p>
</blockquote>
<h4 id=分库>分库</h4>
<p>垂直分库：根据业务的耦合性，将关联度低的不同表存储在不同的数据库，以达到资源的饱和利用率。这样每个微服务系统使用独立的一个数据库。</p>
<h4 id=分表>分表</h4>
<p>分表分为水平分表和垂直分表（也能避免跨页问题）<sup>[7]</sup>。</p>
<blockquote>
<p>MySQL 底层是通过数据页存储的，一条记录占用空间过大会导致跨页，造成额外的性能开销。另外数据库以行为单位将数据加载到内存中，这样表中字段长度较短且访问频率较高，内存能加载更多的数据，命中率更高，减少了磁盘IO，从而提升了数据库性能。</p>
</blockquote>
<p>在业务层增加一张业务和数据存储的表之间的关系表，比如在此方案<sup>[4]</sup>中增加了 <strong>设备-动态数据关系表（表名t_device_table_map）</strong> 来存储设备和动态数据表的关系。</p>
<p>最后，梳理下分表 VS 分区</p>
<ul>
<li>分区就是水平分表的数据库实现版本，水平分表的优点是可以将单张表的数据切分到多个服务器上，每个服务器具有相应的库和子表。</li>
<li>分区只是一张表中的数据和索引的存储位置发生变化，分表是真实的有多套表的配置文件</li>
<li>分区没法突破数据库层面，而分表可以将子表分配在同一个库中，也可以分配在不同的库中。</li>
</ul>
<h4 id=nosqlnewsql-todo>NoSql/NewSql #TODO</h4>
<h2 id=index-scan-vs-bitmap-scan-vs-sequuentianl-scan>Index scan vs Bitmap scan vs Sequuentianl scan</h2>
<p>PostgreSQL will first scan the index and compile those rows / blocks, which are needed at the end of the scan. Then PostgreSQL will take this list and go to the table to really fetch those rows. The beauty is that this mechanism even works if you are using more than just one index.<sup>[1]</sup></p>
<p><img src=https://www.cybertec-postgresql.com/wp-content/uploads/2018/01/03_PostgreSQL-Bitmap-scan.jpg alt="PostgreSQL Bitmap-scan"></p>
<h2 id=联合索引>联合索引</h2>
<p>回表，在执行计划中，table access by index rowid 代表是回表动作。</p>
<p>联合索引的理解<sup>[6]</sup>: 联合索引结构也是 B+Tree，即按照第一个关键字进行索引，然后在叶子节点上按照第一个关键字、第二个关键字、第三个关键字&mldr;进行排序。</p>
<p>最左原则。</p>
<p>如何设计之一： 等值查询中，查询条件a返回的条目比较多，查询条件b返回的条目比较多，而同时查询a、b返回的条目比较少，那么适合建立联合索引；</p>
<p>如何设计之二： 等值查询、范围查询，等值查询的列建在前、范围查询的列建在后。</p>
<h2 id=其他>其他</h2>
<p>导出数据库</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mysqldump -u root -p news &gt; news.sql
</code></pre></div><p><a href=http://sunnyingit.github.io/book/section_python/SQLalchemy-session.html>sqlalchemy session</a> 详细介绍sqlalchemy session 几种状态，以及最佳实践。</p>
<h2 id=docker>Docker</h2>
<p><a href=https://docs.docker.com/engine/reference/commandline/rm/>docker 使用</a> docker 命令使用</p>
<p>Docker: Are you trying to connect to a TLS-enabled daemon without TLS?</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo docker images
</code></pre></div><p>export save 区别</p>
<p><a href=https://docs.docker.com/engine/reference/commandline/export/>docker export</a> Export a container’s filesystem as a tar archive<br>
<a href=http://www.jianshu.com/p/8408e06b7273>Docker images导出和导入</a> 实践</p>
<h2 id=bash>BASH</h2>
<p>tar 压缩文件夹，exclude排除文件</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>tar --exclude<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;./folder1&#39;</span>--exclude<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;./folder&#39;</span> --exclude<span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;./upload/folder2&#39;</span> -zcvf /backup/filename.tgz .
</code></pre></div><p><a href=https://cn.vuejs.org/v2/guide/render-function.html>VUE 渲染函数</a></p>
<h2 id=参考>参考</h2>
<p>[1] Hans-Jürgen Schönig: POSTGRESQL INDEXING: INDEX SCAN VS. BITMAP SCAN VS. SEQUENTIAL SCAN (BASICS)</p>
<p>[2] zhanlijun 的博客园: 位图索引:原理（BitMap index）</p>
<p>[3] Markus Winand: Pagination Done the Right Way(PPT)</p>
<p>[4] Chaexsy 掘金: MySql 数据库分表分区实践</p>
<p>[5] 茶谪仙 掘金： 数据库分区一篇就透了</p>
<p>[6] houbb: 数据库索引-07-联合索引</p>
<p>[7] PHP 架构师布乐： Mysql 的分区/分库/分表总结</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0f7abe9fd840584d9989a663fa49cc9c>26 - Daily 1208</h1>
<div class=lead>这段时间太忙了,忙不是理由，chrome tab 都推挤密密麻麻了</div>
<h2 id=学习>学习</h2>
<h3 id=docker>Docker</h3>
<p><a href=https://runnable.com/docker/docker-compose-networking>docker 网络</a> 得仔细学习～，使用自定义的网络,&ndash;link不生效，有依赖的docker容器启动时
提示没办法找到服务</p>
<p><a href=https://github.com/docker/compose/issues/982>Setting mac address for container</a> docker还可以固定mac地址，mac地址都有了安全很重要</p>
<p><a href=https://www.poftut.com/get-docker-container-ip-mac-address/>How To Get Docker Container Ip and Mac Address</a> 查询ip地址与mac地址</p>
<p><a href=https://gerrit.googlesource.com/docker-gerrit/>docker 下部署gerrit</a> 这个非常方便，一键搞定</p>
<h3 id=积累>积累</h3>
<p>几十个tab下来都是docker的内容，最近被docker折腾的死去活来，要固定ip，要固定mac地址, 最后还是因为网络无办法访问取消了。</p>
<p>开始改bug</p>
<h3 id=感情>感情</h3>
<p>压力山大</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-1b89093d737fb3e3735edc770710201b>27 - Daily 1215</h1>
<h2 id=学习>学习</h2>
<h3 id=understanding-rest>Understanding REST</h3>
<p>Principles of REST:</p>
<ul>
<li><strong>Resources</strong> expose easily understood directory structure URIs.</li>
<li><strong>Representations</strong> transfer JSON or XML to represent data objects and attributes.</li>
<li><strong>Messages</strong> use HTTP methods explicitly (for example, GET, POST, PUT, and DELETE).</li>
<li><strong>Stateless</strong> interactions store no client context on the server between requests. State dependencies limit and restrict scalability. The client holds session state.</li>
</ul>
<p><strong>Idempotency</strong> 新词，中文翻译过来是：冪等, 这是put与post的最大的区别</p>
<blockquote>
<p>idempotent 的意思是如果相同的操作再執行第二遍第三遍，結果還是跟第一遍的結果一樣 (也就是說不管執行幾次，結果都跟只有執行一次一樣)。</p>
</blockquote>
<h3 id=vue>Vue</h3>
<p><a href=https://vuejs.org/v2/guide/components.html#Async-Components>Vue Async Components</a> 异步加载组件</p>
<pre tabindex=0><code>Vue.component('async-webpack-example', function (resolve) {
  // This special require syntax will instruct Webpack to
  // automatically split your built code into bundles which
  // are loaded over Ajax requests.
  require(['./my-async-component'], resolve)
})
</code></pre><p>但是，如下webpack 2 + ES2015代码却不行了</p>
<pre tabindex=0><code>Vue.component(
  'async-webpack-example',
  // The `import` function returns a `Promise`.
  () =&gt; import('./my-async-component')
)
</code></pre><p><code>TODO</code></p>
<h3 id=vim>vim</h3>
<p><a href=https://github.com/Valloric/YouCompleteMe#full-installation-guide>YCM vue不支持</a> 打开vue文件导致ycm server挂了，没找到合适的办法解决<br>
目前手动启动ycm server:<code>YcmRestartServer</code></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-e8bc88a079e7284d75958ee9e69d263e>28 - Daily 1229</h1>
<p><a href=https://chase-seibert.github.io/blog/2010/07/23/django-zip-files-create-dynamic-in-memory-archives-with-pythons-zipfile.html>Django zip files (create dynamic in-memory archives with Python’s zipfile)</a> 动态打包文件 并输出到浏览器端</p>
<pre tabindex=0><code>
from StringIO import StringIO
from zipfile import ZipFile
from django.http import HttpResponse

def download(request, company_id):

    in_memory = StringIO()
    zip = ZipFile(in_memory, &quot;a&quot;)

    zip.writestr(&quot;file1.txt&quot;, &quot;some text contents&quot;)
    zip.writestr(&quot;file2.csv&quot;, &quot;csv,data,here&quot;)

    # fix for Linux zip files read in Windows
    for file in zip.filelist:
        file.create_system = 0

    zip.close()

    response = HttpResponse(mimetype=&quot;application/zip&quot;)
    response[&quot;Content-Disposition&quot;] = &quot;attachment; filename=two_files.zip&quot;

    in_memory.seek(0)
    response.write(in_memory.read())

    return response
</code></pre><h2 id=using-the-forwarded-header>Using the Forwarded header</h2>
<pre tabindex=0><code>proxy_set_header Forwarded $proxy_add_forwarded;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
</code></pre><p>获取真实的地址：
<a href=https://stackoverflow.com/questions/3110919/how-do-i-get-the-client-ip-of-a-tornado-request>How do I get the client IP of a Tornado request?</a></p>
<pre tabindex=0><code>x_real_ip = self.request.headers.get(&quot;X-Real-IP&quot;)
remote_ip = x_real_ip or self.request.remote_ip
</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-cd168b78dd4295e42ebc6ea7c8951f33>29 - Daily 2021/11/01 Postive Discipline</h1>
<h2 id=正面管教的原则>正面管教的原则</h2>
<h3 id=正面管教构成的要素>正面管教构成的要素</h3>
<ul>
<li>相互尊重</li>
<li>理解行为背后的信念</li>
<li>理解孩子的发展和适龄行为。</li>
<li>有效的沟通</li>
<li>能教给孩子技能的管教</li>
<li>专注于解决方案，而非惩罚</li>
<li>鼓励</li>
<li>孩子在感觉更好时才会做的更好。</li>
</ul>
<h3 id=应当避免的管教方式>应当避免的管教方式</h3>
<p>如果你在对孩子大声喊叫或说教，请停下来。如果你在孩子的屁股或打手心，请停下来。如果你在试图通过威胁、警告、贿赂或说教让孩子顺从，请停下来。 所有这些方式都是不尊重的，并且会导致孩子的怀疑、羞愧、内疚，不仅在当时，而且包括未来。</p>
<h3 id=孩子真正需要的是什么>孩子真正需要的是什么？</h3>
<ol>
<li>归属感（情感联结）</li>
<li>个人的力量和自主（有能力）</li>
<li>社会和人生技能（有贡献）</li>
<li>和善而坚定的指导，教给孩子的技能的管教（以尊严和尊重的方式）</li>
</ol>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-a6591dd7049ab03f1d864f15c9b03dac>30 - Daily 2022/01/13</h1>
<p>PPT 养成日记</p>
<p>写PPT还是非常耗时的, 一张 PPT 已经修改了100多个版本了。</p>
<p>那如何写好每一张 PPT 呢？ 就是如何制作一张漂亮的网页一样。</p>
<h2 id=配色>配色</h2>
<h2 id=内容框架>内容框架</h2>
<h2 id=每一张-ppt-的构图>每一张 PPT 的构图</h2>
<p>这里有很多模版可以参考，比如 slide team 上虽然是收费的，但是上面的画图思路很值得学习。</p>
<h2 id=参考>参考</h2>
<p>[1] PPT 作图思路 <a href=https://www.slideteam.net/>https://www.slideteam.net/</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d7217e8c6dcba63b859a27c5f6578cf8>31 - Daily 5/31</h1>
<h3 id=此时>此时</h3>
<p>今天是2017年前半年最后一天了，时间真快，过年前大家还在说2017年要实现什么目标，可是我真的没离目标靠近了多少，真伤感。偶尔我真的大叫一声释放下此时的压力。</p>
<h3 id=此事>此事</h3>
<p>事业：1、办公家具事情在开年出现几次问题，其中最大问题是工厂发出的货是次品，让我产生想退出办公家具贸易，做自己的产品，从而把控生产质量与包装，减少售后；2、做外贸树脂产品、现在一个月出几单实在让人头疼，接下来走多平台多流量；3、WISH一个店铺因为发货太慢每况愈下，其他店铺正在审核或在上架产品。4、 偶尔又想去上班、今天试着让微信朋友投了一份简历出去。5、每天工作到6-7点就感觉要去跑步锻炼了，不然头晕。<br>
感情：事业压力大，偶尔不想去碰感情的事情，回头一想年纪也算大了，得抓紧时间了</p>
<h3 id=以后>以后</h3>
<p>选产品上架出单，不断学习，或工作或继续外贸内贸，感觉后者几率大一些，加油呀！</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0a97a012d24ad5724bc2bb78e1c4660f>32 - Daily 6/1</h1>
<h3 id=流水账>流水账</h3>
<p>今天上午完成30个产品上传，舒爽！明天坚持30个&mldr;<br>
下午胡思乱想网络传真服务的事情：是否进入做：</p>
<ol>
<li>一个月销售额4万，成本一万，月赚3万。</li>
<li>传真是个没落行业，市场需要就那么大，再进去做顶多做到一半的市场，2万！才两万！除去成本没剩多少了</li>
<li>以最低的成本找人一起做这个服务。</li>
</ol>
<p>打包发货开关贴，包装跟产品一样重量，要减重减重减重<br>
晚上加班制作视频，还是不太熟练Ulead Video Studio 11，摸索摸索。明天正确把视频做出来，接下来拍照开关贴
回来俯卧撑，涡轮推，倒立，洗澡睡觉<br>
嘴角上火，吃粽子吃多了，饮食乱了。</p>
<h4 id=六一快乐一去不复返的时间--看了别人上川岛的露营照片景真是美等着忙完就去>六一快乐，一去不复返的时间 | 看了别人上川岛的露营照片，景真是美，等着，忙完就去</h4>
<h2 id=多年以后回想此时此情此事>多年以后回想此时此情此事</h2>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0b39f164c21923e4713cfe173a4d8037>33 - Daily 6/3</h1>
<h3 id=ulead-video-studio-视频中音频处理>Ulead Video Studio 视频中音频处理</h3>
<p>今天抽空对视频的声音进行优化：整个视频由图片以及拍摄的视频组成，当播放从图片到录制视频之间，
声音是突然地从无到有过程，感觉很不协调，正常应该是从无开始、声音慢慢变大、到最大持续、最后随着结束慢慢变小、最后没有声音的过程。而Ulead Video Studio中<code>fade in</code> & <code>fade out</code> 很好的处理这个需求，而且可以调整声音变化的快慢<br>
总算认真学习了《会声会影 11 教学影片大纲：第三单元 影片剪接与素材调整》 这个课程真的很实用，
台湾课程，非常赞，再学习其他单元（为了打开MDF、MDS文件，也是找遍了大半个百度，也算值了，教程这么好）<br>
视频制作告一段落！</p>
<h3 id=计划>计划</h3>
<p><strong>亚马逊平台</strong>：开2-3款树脂产品<br>
<strong>WISH平台</strong>： 继续每天30款产品上架（MD今天偷懒了，明天继续)<br>
<strong>淘宝平台</strong>：家具产品</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-83405704c229ae1f822f152500ebd082>34 - Daily 9/11</h1>
<h2 id=学习>学习</h2>
<h3 id=nerdtree>NERDTree</h3>
<p>隐藏指定后缀名的文件</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000>let</span> <span style=color:#000>NERDTreeIgnore</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;\.pyc$&#39;</span><span style=color:#000;font-weight:700>]</span>
</code></pre></div><h3 id=ctrlsf>Ctrlsf</h3>
<p>In CtrlSF Window:</p>
<ul>
<li><code>O</code> - Like <code>Enter</code> but always leave CtrlSF window opening.</li>
<li><code>t</code> - Like <code>Enter</code> but open file in a new tab.</li>
</ul>
<pre tabindex=0><code>nnoremap &lt;C-F&gt;t :CtrlSFToggle&lt;CR&gt;
inoremap &lt;C-F&gt;t &lt;Esc&gt;:CtrlSFToggle&lt;CR&gt;
</code></pre><h3 id=command-t>Command-t</h3>
<p>检索出文件，需要在新的split window打开文件</p>
<pre tabindex=0><code>&lt;C-CR&gt;      open the selected file in a new split window
&lt;C-s&gt;       open the selected file in a new split window
&lt;C-v&gt;       open the selected file in a new vertical split window
&lt;C-t&gt;       open the selected file in a new tab
</code></pre><h3 id=vim>vim</h3>
<h4 id=split>split</h4>
<ul>
<li><code>Ctrl-w =</code> resize 所有的窗口一样大小</li>
<li><code>Ctrl-w |</code> 宽度最大化</li>
<li><code>Ctrl-w _</code> 高度最大化</li>
</ul>
<h4 id=search>search</h4>
<pre tabindex=0><code>:noh
</code></pre><p>turn off highlighting util the next search</p>
<h3 id=ycm>ycm</h3>
<p>选择快捷键</p>
<pre tabindex=0><code>let g:ycm_key_list_select_completion = ['&lt;TAB&gt;', '&lt;Down&gt;']
</code></pre><h3 id=sqlachemy>SQLachemy</h3>
<p><a href="https://bitbucket.org/zzzeek/pycon2014_atmcraft/src/f50cbe745a19?at=master">atmcraft</a> model 目录下的meta是做什么用的</p>
<h3 id=tornado>Tornado</h3>
<p><a href=https://github.com/puentesarrin/selene/tree/44bb9ef98627a2b581dca9fe78dab6852472b8ff>selene</a> 案例学习，集成数据库monogoDB异步查询 <code>代码阅读</code><br>
<a href=https://github.com/no13bus/ohmyrepo>ohmyrepo</a> 简单的案例，集成了Cache。 <code>代码阅读</code></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-a9ba4dfbcd416be7150b8304aa335be1>35 - Daily 9/12</h1>
<h2 id=学习>学习</h2>
<h3 id=bash-history>Bash History</h3>
<p>修改命令记录数量</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#204a87>export</span> <span style=color:#000>HISTFILESIZE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>10000</span>
<span style=color:#204a87>export</span> <span style=color:#000>HISTSIZE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>1000</span>
</code></pre></div><h3 id=mac-terminal-tab>MAC Terminal TAB</h3>
<p>tab切换快捷键
<code>Command + shit + {</code>或<code>Command + Shit + ←</code> 向左切换<br>
<code>Command + shit + }</code>或<code>Command + Shit + →</code> 向左切换</p>
<h3 id=gerrit>Gerrit</h3>
<p><code>gerrit query</code> Query the change database <a href=https://git.eclipse.org/r/Documentation/cmd-query.html>gerrit query</a><br>
<a href=https://stackoverflow.com/questions/22264533/obtain-the-latest-refspec-on-a-gerrit-change>gerrit query : Obtain the latest refspec on a Gerrit Change</a> 详细讲解gerrit query<br>
<code>gerrit stream-events</code> 提交事件<br>
<a href=https://gerrit-review.googlesource.com/Documentation/cmd-stream-events.html>gerrit stream-events</a> Provides a portal into the major events occurring on the server, outputting activity data in real-time to the client. Events are filtered by the caller’s access permissions, ensuring the caller only receives events for changes they can view on the web, or in the project repository.</p>
<h3 id=git>GIT</h3>
<h4 id=git_ssh_command>GIT_SSH_COMMAND</h4>
<p>用于git ssh链接访问仓库时，默认设置<br>
<a href=https://git-scm.com/docs/git#git-codeGITSSHCOMMANDcode>GIT_SSH_COMMAND</a> $GIT_SSH_COMMAND takes precedence over $GIT_SSH, and is interpreted by the shell, which allows additional arguments to be included.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#000>GIT_SSH_COMMAND</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>&#39;ssh -i %s&#39;</span> git fetch 
</code></pre></div><h4 id=fetch_head>FETCH_HEAD</h4>
<p><a href=https://ruby-china.org/topics/4768>FETCH_HEAD</a> 指的是: 某个branch在服务器上的最新状态'. 每一个执行过fetch操作的项目&rsquo;都会存在一个FETCH_HEAD列表, 这个列表保存在 .git/FETCH_HEAD 文件中, 其中每一行对应于远程服务器的一个分支. 当前分支指向的FETCH_HEAD, 就是这个文件第一行对应的那个分支.</p>
<h3 id=vim>Vim</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#000;font-weight:700>:</span><span style=color:#000>set</span> <span style=color:#000>wrap</span> <span style=color:#8f5902;font-style:italic>&#34;设置自动换行</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#000;font-weight:700>:</span><span style=color:#000>set</span> <span style=color:#000>nowrap</span> <span style=color:#8f5902;font-style:italic>&#34;设置不自动换行</span><span style=color:#a40000>
</span></code></pre></div><h3 id=python>Python</h3>
<p><code>rfind</code> returns the last index whre the substring is found, or -1 if no such index exists</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87>str</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>rfind</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>str</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>beg</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#0000cf;font-weight:700>0</span> <span style=color:#000>end</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87>len</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>string</span><span style=color:#000;font-weight:700>))</span>
</code></pre></div><p>获取当前时间的时间戳</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87>int</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>time</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>time</span><span style=color:#000;font-weight:700>())</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-5abb1d58ec4fe4729ab279df0840251d>36 - Daily 9/13</h1>
<h2 id=学习>学习</h2>
<h3 id=python>Python</h3>
<h4 id=super>super</h4>
<p><a href=https://laike9m.com/blog/li-jie-python-super,70/>理解 Python super</a> 不要一说到 super 就想到父类！super 指的是 MRO 中的下一个类！</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>Root</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>object</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;this is Root&#34;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>B</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Root</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;enter B&#34;</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#8f5902;font-style:italic># print(self)  # this will print &lt;__main__.D object at 0x...&gt;</span>
        <span style=color:#204a87>super</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>B</span><span style=color:#000;font-weight:700>,</span> <span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>__init__</span><span style=color:#000;font-weight:700>()</span>
        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;leave B&#34;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>C</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>Root</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>__init__</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;enter C&#34;</span><span style=color:#000;font-weight:700>)</span>
        <span style=color:#204a87>super</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>C</span><span style=color:#000;font-weight:700>,</span> <span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>__init__</span><span style=color:#000;font-weight:700>()</span>
        <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;leave C&#34;</span><span style=color:#000;font-weight:700>)</span>

<span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>D</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>B</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>C</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>pass</span>

<span style=color:#000>d</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>D</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>d</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>__class__</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>__mro__</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><h4 id=mixin>mixin</h4>
<p><a href=http://www.jianshu.com/p/933a22ac0eb7>Python mixin模式</a> Python的Mixin模式可以通过多继承的方式来实现</p>
<h3 id=vim>Vim</h3>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#204a87;font-weight:700>let</span> <span style=color:#000>g</span>:<span style=color:#000>UltiSnipsExpandTrigger</span><span style=color:#000;font-weight:700>=</span><span style=color:#4e9a06>&#34;&lt;c-j&gt;&#34;</span><span style=color:#a40000>
</span></code></pre></div><p><a href=https://github.com/sirver/ultisnips>ultisnips</a> 自动完成跟YCM的<code>&lt;tab></code>快捷键冲突<br>
<a href=http://mednoter.com/UltiSnips.html>UltiSnips 让 Vim 飞起来</a> vim snippets详细设置过程</p>
<h3 id=andoid>Andoid</h3>
<p><a href=https://looksok.wordpress.com/2014/07/12/compile-gradle-project-with-another-project-as-a-dependency/>Compile gradle project with another project as a dependency</a> 编译两个独立的项目，需要制定依赖的路径<br>
<a href=https://docs.gradle.org/current/userguide/dependency_management.html>Dependency Management</a> Gradle依赖</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-78e7f3d24a774bffb8590129b266410b>37 - Daily 9/14</h1>
<h2 id=学习>学习</h2>
<h3 id=vue>Vue</h3>
<p><a href=https://github.com/Andiedie/vue-history-api-fallback>vue-history-api-fallback</a> 解决url中包含句的问题</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>history</span><span style=color:#000;font-weight:700>({</span>
  <span style=color:#000>router</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>disableDotRule</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>true</span>
<span style=color:#000;font-weight:700>});</span>
</code></pre></div><h3 id=webpack>webpack</h3>
<p>利用<code>historyApiFallback</code>选项，可以重写url</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>historyApiFallback</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>rewrites</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span>
        <span style=color:#8f5902;font-style:italic>// shows views/landing.html as the landing page
</span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000;font-weight:700>{</span> <span style=color:#000>from</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>/^\/$/</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>to</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;/views/landing.html&#39;</span> <span style=color:#000;font-weight:700>},</span>
        <span style=color:#8f5902;font-style:italic>// shows views/subpage.html for all routes starting with /subpage
</span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000;font-weight:700>{</span> <span style=color:#000>from</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>/^\/subpage/</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>to</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;/views/subpage.html&#39;</span> <span style=color:#000;font-weight:700>},</span>
        <span style=color:#8f5902;font-style:italic>// shows views/404.html on all other pages
</span><span style=color:#8f5902;font-style:italic></span>        <span style=color:#000;font-weight:700>{</span> <span style=color:#000>from</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>/./</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>to</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;/views/404.html&#39;</span> <span style=color:#000;font-weight:700>},</span>
    <span style=color:#000;font-weight:700>],</span>
<span style=color:#000;font-weight:700>},</span>
</code></pre></div><h3 id=javascript>Javascript</h3>
<p><code>import</code> <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import>用法</a> used to import functions, objects, or primitives which are defined in and exported by an external module, script, or the like.</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>defaultMember</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>as</span> <span style=color:#000>name</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>member</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>member</span> <span style=color:#000>as</span> <span style=color:#000>alias</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>member1</span> <span style=color:#000;font-weight:700>,</span> <span style=color:#000>member2</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>member1</span> <span style=color:#000;font-weight:700>,</span> <span style=color:#000>member2</span> <span style=color:#000>as</span> <span style=color:#000>alias2</span> <span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[...]</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>defaultMember</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>{</span> <span style=color:#000>member</span> <span style=color:#000;font-weight:700>[</span> <span style=color:#000;font-weight:700>,</span> <span style=color:#000;font-weight:700>[...]</span> <span style=color:#000;font-weight:700>]</span> <span style=color:#000;font-weight:700>}</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>defaultMember</span><span style=color:#000;font-weight:700>,</span> <span style=color:#ce5c00;font-weight:700>*</span> <span style=color:#000>as</span> <span style=color:#000>name</span> <span style=color:#000>from</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
<span style=color:#204a87;font-weight:700>import</span> <span style=color:#4e9a06>&#34;module-name&#34;</span><span style=color:#000;font-weight:700>;</span>
</code></pre></div><h3 id=tornado>Tornado</h3>
<p><a href=http://www.nowamagic.net/academy/part/13/325/>Python与Tornado</a> 一个系列 抽时间通读 <code>#TODO</code></p>
<h3 id=python>Python</h3>
<p><a href=https://stackoverflow.com/questions/1549801/differences-between-isinstance-and-type-in-python>Differences between isinstance() and type() in python</a> isinstance与type</p>
<p><a href=https://stackoverflow.com/questions/6159900/correct-way-to-write-line-to-file-in-python>Correct way to write line to file in Python</a> print也可以写入文件里</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-0fb0beed72ec94421cecb4332c0f17f6>38 - Daily 9/18</h1>
<h2 id=学习>学习</h2>
<h3 id=redis>redis</h3>
<p><a href=https://segmentfault.com/a/1190000005052628>Redis持久化-RDB与AOF</a> 同一个redis实例可以配置两种持久化方案<br>
<a href=https://www.douban.com/group/topic/15516593/>Redis 查询所有的key</a> 查询所有的key<br>
<a href=https://segmentfault.com/a/1190000002906345>Redis持久化</a> redis持久化两种方式的对比</p>
<h3 id=python-重命令>python 重命令</h3>
<p><a href=https://stackoverflow.com/questions/8735312/how-to-change-folder-names-in-python>os.rename</a> How to change folder names in python?</p>
<h3 id=vim>Vim</h3>
<p><a href=http://973797893.blog.51cto.com/3057158/1725780>mac vim 配置文件</a> mac vim 记住上次打开的位置</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#000>set</span> <span style=color:#000>viminfo</span><span style=color:#000;font-weight:700>=</span>&#39;<span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>,</span>\&#34;<span style=color:#0000cf;font-weight:700>100</span><span style=color:#000;font-weight:700>,</span>:<span style=color:#0000cf;font-weight:700>20</span><span style=color:#000;font-weight:700>,</span>%<span style=color:#000;font-weight:700>,</span><span style=color:#000>n</span><span style=color:#000;font-weight:700>~</span>/.<span style=color:#000>viminfo</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#000>au</span> <span style=color:#000>BufReadPost</span> * <span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>line</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#39;\&#34;&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>|</span><span style=color:#204a87;font-weight:700>if</span> <span style=color:#000>line</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;&#39;\&#34;&#34;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>&lt;=</span> <span style=color:#000>line</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;$&#34;</span><span style=color:#000;font-weight:700>)|</span><span style=color:#000>exe</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#34;norm &#39;\&#34;&#34;</span><span style=color:#000;font-weight:700>)|</span><span style=color:#204a87;font-weight:700>else</span><span style=color:#000;font-weight:700>|</span><span style=color:#000>exe</span> <span style=color:#4e9a06>&#34;norm $&#34;</span><span style=color:#000;font-weight:700>|</span><span style=color:#204a87;font-weight:700>endif</span><span style=color:#000;font-weight:700>|</span><span style=color:#204a87;font-weight:700>endif</span><span style=color:#a40000>
</span></code></pre></div><p><a href=http://www.cnblogs.com/ifantastic/p/3524751.html>vim 语法高亮</a> 对于大文件，语法高亮</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#000>syn</span> <span style=color:#000>sync</span> <span style=color:#000>fromstart</span><span style=color:#a40000>
</span></code></pre></div><p><a href=http://www.dreamxu.com/books/vim/plugin/youcompleteme.html>vim YCM插件自动补全比较慢的解决办法</a> 第三个字母开始自动完成提示</p>
<p><a href=http://blog.jobbole.com/58978/>vim YCM跳转到定义跳转到申明</a> 使用往前跳和往后跳的快捷键为Ctrl+O以及Ctrl+I。</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-vim data-lang=vim><span style=color:#000>nnoremap</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>leader</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#000>gl</span> :<span style=color:#000>YcmCompleter</span> <span style=color:#000>GoToDeclaration</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>CR</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#000>nnoremap</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>leader</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#000>gf</span> :<span style=color:#000>YcmCompleter</span> <span style=color:#000>GoToDefinition</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>CR</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#a40000>
</span><span style=color:#a40000></span><span style=color:#000>nnoremap</span> <span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>leader</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#000>gg</span> :<span style=color:#000>YcmCompleter</span> <span style=color:#000>GoToDefinitionElseDeclaration</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#000>CR</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#a40000>
</span></code></pre></div><p><a href=http://www.cnblogs.com/jianyungsun/archive/2011/02/14/1954057.html>vim bookmark</a> 字母书签的功能</p>
<p><a href=https://stackoverflow.com/questions/1527784/what-is-vim-recording-and-how-can-it-be-disabled> <strong>[vim recording]</strong> What is vim recording and how can it be disabled?</a> 偶尔按错键，导致左下角出现&rsquo;recording @q&rsquo;等字样</p>
<h3 id=javascript>javascript</h3>
<p><a href=https://github.com/marcuswestin/WebViewJavascriptBridge>IOS webview 与js通信方案</a> 跟java代码有点区别，不能统一吗</p>
<p><a href=https://github.com/webpack/webpack-dev-server/issues/147>Server can&rsquo;t be accessed via IP</a> webpack-server如何配置通过IP访问</p>
<h3 id=python-序列化与反序列化>python 序列化与反序列化</h3>
<p><a href=https://docs.python.org/2/library/pickle.html>pickle — Python object serialization¶</a> 用于redis cache 缓存</p>
<h3 id=confluence>confluence</h3>
<p>这个跟jira如何协作的？</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3098fe12d2ae39d8528f92beb761a9af>39 - Daily 9/21</h1>
<h2 id=学习>学习</h2>
<h3 id=python-unittest-tornado>python unittest tornado</h3>
<p><a href=https://github.com/puentesarrin/selene/blob/master/test/test_handlers.py>test_handlers.py 案例代码</a> selene项目测试案例</p>
<p><a href=https://gist.github.com/didip/867589>request_handler_test.py 案例代码</a> 设置项目根目录、父类构建</p>
<p><a href=https://www.rddoc.com/doc/Tornado-4.4.2/testing/>tornado.testing —单元测试支持异步代码</a> 支持异步测试</p>
<p><a href=https://stackoverflow.com/questions/18285947/how-to-use-a-test-tornado-server-handler-that-authenticates-a-user-via-a-secure>How to use a test tornado server handler that authenticates a user via a secure cookie</a> mock cookie</p>
<p><a href=https://docs.python.org/2/library/unittest.html>命令行下执行单个unittest</a> 更多的参数</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>python -m unittest test_module1 test_module2
python -m unittest test_module.TestClass
python -m unittest test_module.TestClass.test_method
</code></pre></div><p><a href=https://emptysqua.re/blog/tornado-unittesting-eventually-correct/>setup 使用，初始化数据</a> <code>TODO</code></p>
<p><a href=https://github.com/bootandy/tornado_sample/tree/master/sample>tornado sample</a> 有接口测试的项目</p>
<p><a href=http://pyunit.sourceforge.net/pyunit_cn.html#WHERE>python unittest文档</a></p>
<p><a href=https://gxnotes.com/article/79239.html>python unittest执行顺序问题</a> 字母的顺序执行</p>
<p><a href=https://stackoverflow.com/questions/26323090/how-to-mock-get-current-user-in-tornado-for-unittest>python mock handler</a></p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>class</span> <span style=color:#000>MyUT</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>tornado</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>testing</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>AsyncHTTPTestCase</span><span style=color:#000;font-weight:700>):</span>
  <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>get_app</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#000>settings</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#4e9a06>&#34;template_path&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#39;../../../templates&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;cookie_secret&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#39;secret&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;login_url&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#4e9a06>&#39;/admin/login&#39;</span><span style=color:#000;font-weight:700>,</span>
      <span style=color:#4e9a06>&#34;debug&#34;</span><span style=color:#000;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>True</span>
    <span style=color:#000;font-weight:700>}</span>

    <span style=color:#204a87;font-weight:700>return</span> <span style=color:#000>Application</span><span style=color:#000;font-weight:700>([</span>
      <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>r</span><span style=color:#4e9a06>&#39;/admin/create/super&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>handlers</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>CreateSuperUserHandler</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>],</span> <span style=color:#ce5c00;font-weight:700>**</span><span style=color:#000>settings</span><span style=color:#000;font-weight:700>)</span>


  <span style=color:#204a87;font-weight:700>def</span> <span style=color:#000>testGet</span><span style=color:#000;font-weight:700>(</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>):</span>
    <span style=color:#204a87;font-weight:700>with</span> <span style=color:#000>mock</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>patch</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>object</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>handlers</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>CreateSuperUserHandler</span><span style=color:#000;font-weight:700>,</span> <span style=color:#4e9a06>&#39;get_current_user&#39;</span><span style=color:#000;font-weight:700>)</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>m</span><span style=color:#000;font-weight:700>:</span>
      <span style=color:#000>m</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>return_value</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{}</span>
      <span style=color:#000>response</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>fetch</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;/admin/create/super&#39;</span><span style=color:#000;font-weight:700>)</span>

    <span style=color:#204a87>print</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>body</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#3465a4>self</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>assertGreater</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>response</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>body</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>index</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;create&#39;</span><span style=color:#000;font-weight:700>),</span> <span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>)</span>
</code></pre></div><p><a href=https://segmentfault.com/a/1190000002965620>mock handler更详细的例子</a> patch和patch.object 使用</p>
<h3 id=python>Python</h3>
<p><a href=https://www.polarxiong.com/archives/Python-%E6%93%8D%E4%BD%9Cdict%E6%97%B6%E9%81%BF%E5%85%8D%E5%87%BA%E7%8E%B0KeyError%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95.html>操作dict时避免出现KeyError的几种方法</a> 使用get方法更好<br>
<a href=https://stackoverflow.com/questions/18176602/how-to-get-name-of-exception-that-was-caught-in-python>How to get name of exception that was caught in Python?</a> 获取异常的的类名</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>try</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#000>foo</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>bar</span>
<span style=color:#204a87;font-weight:700>except</span> <span style=color:#c00;font-weight:700>Exception</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>exception</span><span style=color:#000;font-weight:700>:</span>
    <span style=color:#204a87;font-weight:700>assert</span> <span style=color:#204a87>type</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>exception</span><span style=color:#000;font-weight:700>)</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>__name__</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;NameError&#39;</span>
    <span style=color:#204a87;font-weight:700>assert</span> <span style=color:#000>exception</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>__class__</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>__name__</span> <span style=color:#ce5c00;font-weight:700>==</span> <span style=color:#4e9a06>&#39;NameError&#39;</span>
</code></pre></div><p><a href=https://stackoverflow.com/questions/27155819/delete-a-key-and-value-from-an-ordereddict>删除dict里面的元素</a> use <code>del</code></p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87;font-weight:700>from</span> <span style=color:#000>collections</span> <span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>OrderedDict</span>
<span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>dct</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>OrderedDict</span><span style=color:#000;font-weight:700>()</span>
<span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>dct</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;a&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>1</span>
<span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>dct</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;b&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>2</span>
<span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>dct</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;c&#39;</span><span style=color:#000;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#0000cf;font-weight:700>3</span>
<span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>dct</span>
<span style=color:#000>OrderedDict</span><span style=color:#000;font-weight:700>([(</span><span style=color:#4e9a06>&#39;a&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;b&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;c&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>)])</span>
<span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#204a87;font-weight:700>del</span> <span style=color:#000>dct</span><span style=color:#000;font-weight:700>[</span><span style=color:#4e9a06>&#39;b&#39;</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span> <span style=color:#000>dct</span>
<span style=color:#000>OrderedDict</span><span style=color:#000;font-weight:700>([(</span><span style=color:#4e9a06>&#39;a&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>),</span> <span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;c&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>)])</span>
<span style=color:#ce5c00;font-weight:700>&gt;&gt;&gt;</span>
</code></pre></div><p><a href=http://www.runoob.com/python/python-object.html>python面向对象</a> 入门级介绍 <code>TODO</code></p>
<p><a href=http://blog.csdn.net/business122/article/details/7541486>python set 集合操做</a> 比如删除某个元素 set.remove(key)</p>
<p><a href=https://stackoverflow.com/questions/5631624/how-to-get-exit-code-when-using-python-subprocess-communicate-method>subprocess returncode</a> 什么时候为0</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#204a87;font-weight:700>import</span> <span style=color:#000>subprocess</span> <span style=color:#204a87;font-weight:700>as</span> <span style=color:#000>sp</span>
<span style=color:#000>child</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>sp</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>Popen</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>openRTSP</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#000>opts</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>split</span><span style=color:#000;font-weight:700>(),</span> <span style=color:#000>stdout</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#000>sp</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>PIPE</span><span style=color:#000;font-weight:700>)</span>
<span style=color:#000>streamdata</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>child</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>communicate</span><span style=color:#000;font-weight:700>()[</span><span style=color:#0000cf;font-weight:700>0</span><span style=color:#000;font-weight:700>]</span>
<span style=color:#000>rc</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>child</span><span style=color:#ce5c00;font-weight:700>.</span><span style=color:#000>returncode</span>
</code></pre></div><h3 id=tornado>Tornado</h3>
<p><a href=http://www.jianshu.com/p/3d20a092588d>Tornado异步与延迟任务</a> Tornado异步通俗易懂的教程<br>
<a href=http://tornado-zh.readthedocs.io/zh/latest/guide/coroutines.html>协程</a> 官方文档 难懂<br>
<a href=http://strawhatfy.github.io/2015/07/22/Tornado.gen/>tornado.gen源码解析</a> <code>TODO</code></p>
<h3 id=git>GIT</h3>
<pre tabindex=0><code>*
!.gitignore
</code></pre><p><a href=https://segmentfault.com/a/1190000006866280>git中如何提交空目录</a> 空文件</p>
<p><a href=https://github.com/geeeeeeeeek/git-recipes/wiki/5.2-%E4%BB%A3%E7%A0%81%E5%9B%9E%E6%BB%9A%EF%BC%9AReset%E3%80%81Checkout%E3%80%81Revert-%E7%9A%84%E9%80%89%E6%8B%A9>git 提交撤销</a></p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git reset HEAD~2
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-c727370ca88bf63f507c67e9642157c1>40 - Daily 9/22</h1>
<h2 id=学习>学习</h2>
<h3 id=项目>项目</h3>
<p>项目周报的编写参考confluence里面的优秀的周报日志，<code>TODO</code><br>
模版如下：</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-markdown data-lang=markdown><span style=color:purple;font-weight:700>### 本周工作
</span><span style=color:purple;font-weight:700></span>---
<span style=color:#204a87;font-weight:700>1.</span> 学习vue
<span style=color:#204a87;font-weight:700>2.</span> 完成登录页面开发
...

<span style=color:purple;font-weight:700>### 下周计划
</span><span style=color:purple;font-weight:700></span>---
<span style=color:#204a87;font-weight:700>1.</span> 继续学习vue
<span style=color:#204a87;font-weight:700>2.</span> 继续完成登录页面开发

<span style=color:purple;font-weight:700>### issues
</span><span style=color:purple;font-weight:700></span>---
<span style=color:#204a87;font-weight:700>-</span> 我觉得我们团队棒棒哒，就是女生少了一点
<span style=color:#204a87;font-weight:700>-</span> webpack的打包时间越来越长，我们可以考虑优化它
</code></pre></div><h3 id=vue>VUE</h3>
<p>合作的同事去了其他部门，我开始接口VUE开发工作，然后问题来了
<a href=https://cn.vuejs.org/v2/api/#watch>Watch 对比更改前的值oldValue</a></p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#000>a</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#204a87;font-weight:700>function</span> <span style=color:#000;font-weight:700>(</span><span style=color:#000>val</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>oldVal</span><span style=color:#000;font-weight:700>)</span> <span style=color:#000;font-weight:700>{</span>
      <span style=color:#000>console</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>log</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;new: %s, old: %s&#39;</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>val</span><span style=color:#000;font-weight:700>,</span> <span style=color:#000>oldVal</span><span style=color:#000;font-weight:700>)</span>
    <span style=color:#000;font-weight:700>},</span>
</code></pre></div><h3 id=vim>Vim</h3>
<p><a href=https://github.com/posva/vim-vue>vim-vue 下vue文件居然高亮了前部分</a></p>
<pre tabindex=0><code>autocmd FileType vue syntax sync fromstart
</code></pre><p>加上上面的配置就可以了</p>
<p>支持NERDCommenter的解决办法。</p>
<pre tabindex=0><code>let g:ft = ''
function! NERDCommenter_before()
  if &amp;ft == 'vue'
    let g:ft = 'vue'
    let stack = synstack(line('.'), col('.'))
    if len(stack) &gt; 0
      let syn = synIDattr((stack)[0], 'name')
      if len(syn) &gt; 0
        exe 'setf ' . substitute(tolower(syn), '^vue_', '', '')
      endif
    endif
  endif
endfunction
function! NERDCommenter_after()
  if g:ft == 'vue'
    setf vue
    let g:ft = ''
  endif
endfunction
</code></pre><h3 id=codepenio>Codepen.io</h3>
<p>在线编辑代码，可见即可得，学习的好工具，支持zencoding<br>
<em>login in by github</em></p>
<h3 id=css>CSS</h3>
<p><a href=https://coolshell.cn/articles/6840.html>布局</a> 40个教程、技巧、例子和最佳实践</p>
<p><a href=http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html>css Flex</a> flex布局，项目中用到比较多</p>
<h3 id=javascript>javascript</h3>
<p><a href=http://www.ruanyifeng.com/blog/2015/07/monad.html>Monad</a> 这是个什么鬼，第一次听说 还是无意中看到 <code>TODO</code></p>
<h3 id=processon>processon</h3>
<p>流程图的好工具在线的<br>
已经开始使用了，简简单单画了三个图，太强大了。</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ba27040cd5b9dd2964e945a84c423939>41 - Daily 9/25 #vpn</h1>
<h2 id=学习>学习</h2>
<h3 id=supervisor>Supervisor</h3>
<p><a href=http://supervisord.org>Supervisor</a> 是一个用 Python 写的进程管理工具，可以很方便的用来启动、重启、关闭进程（不仅仅是 Python 进程）。除了对单个进程的控制，还可以同时启动、关闭多个进程，比如很不幸的服务器出问题导致所有应用程序都被杀死，此时可以用 supervisor 同时启动所有应用程序而不是一个一个地敲命令启动。<br>
<a href=http://liyangliang.me/posts/2015/06/using-supervisor/>Supervisor 中文文档</a></p>
<h3 id=screen>Screen</h3>
<p><a href=http://easwy.com/blog/archives/display-window-list-on-title-bar-and-status-bar-of-screen/>在标题和状态栏中显示Screen的窗口名称</a></p>
<pre tabindex=0><code>caption always &quot;%{= kw}%-w%{= kG}%{+b}[%n %t]%{-b}%{= kw}%+w %=%d %M %0c %{g}%H%{-}&quot;
</code></pre><h3 id=vpn>Vpn</h3>
<p>今天vpn可以看720P视频奇怪，接下来要做的事情是测试vpn速度，保证vpn24小时速度稳定</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-aa028a05e971916505636bfdb54422ab>42 - Daily 9/27 Git 相关知识点</h1>
<h2 id=学习>学习</h2>
<h3 id=bash-history>Bash history</h3>
<p>编辑文件<code>.bash_profile</code></p>
<pre tabindex=0><code>HISTFILESIZE=100000
</code></pre><p>重启下终端，看看~/.bash_history 是不是就可以存储更多的历史命令了。</p>
<h3 id=git-tag>Git tag</h3>
<p>补打标签</p>
<pre tabindex=0><code>git tag -a v1.2 9fceb02
</code></pre><p>分享标签</p>
<pre tabindex=0><code>git push origin [tagname]
</code></pre><h3 id=git-stash>Git stash</h3>
<p>多个分支共享 stash list, 为什么<code>git stash apply</code>时不区分分支。</p>
<blockquote>
<p>今天碰到的一问题，<code>git stash</code>完美解决问题： 我在 dev 分支上更改了一个小 bug，我需要把这个升级到线上，但是 dev 分支上正在进行项目 A 的开发很久了，没办法直接把 dev 上线，怎么办？ 只有先<code>git stash</code>储藏起来，然后切换分支，通过<code>git stash apply</code> 应用到切换后的分支即可，然后把提交，上线新分支。切换回 dev 继续开发项目 A</p>
</blockquote>
<h3 id=git-checkout-revert-reset>Git checkout revert reset</h3>
<p><a href=https://github.com/geeeeeeeeek/git-recipes/wiki/5.2-%E4%BB%A3%E7%A0%81%E5%9B%9E%E6%BB%9A%EF%BC%9AReset%E3%80%81Checkout%E3%80%81Revert-%E7%9A%84%E9%80%89%E6%8B%A9>代码回滚：Reset、Checkout、Revert 的选择</a> 好详细的介绍</p>
<p><a href=https://github.com/geeeeeeeeek/git-recipes/wiki/5.1-%E4%BB%A3%E7%A0%81%E5%90%88%E5%B9%B6%EF%BC%9AMerge%E3%80%81Rebase-%E7%9A%84%E9%80%89%E6%8B%A9>代码合并：Merge、Rebase 的选择</a> git rebase 黄金法则</p>
<blockquote>
<p>有没有别人正在这个分支上工作？</p>
</blockquote>
<h3 id=git-rebase>Git rebase</h3>
<p><a href=https://blog.yorkxin.org/2011/07/29/git-rebase>Git-rebase 小筆記</a> 介绍各种 rebase 详细技巧</p>
<p><a href=https://github.com/doggy8088/Learn-Git-in-30-days/blob/master/zh-tw/23.md>修正 commit 過的版本歷史紀錄 Part 5</a> 实战 Rebase 能做的事</p>
<h3 id=git-tree>Git tree</h3>
<p><a href=https://stackoverflow.com/questions/1064361/unable-to-show-a-git-tree-in-terminal> show a Git tree in terminal </a></p>
<pre tabindex=0><code>git log --graph --oneline --all
</code></pre><p>配置 git tree</p>
<pre tabindex=0><code>git config --global alias.tree &quot;log --graph --decorate --pretty=oneline --abbrev-commit&quot;
</code></pre><h3 id=git-push--f>Git push -f</h3>
<p><a href="http://www.bysocket.com/?p=926">Git 回滚远程版本</a> 真的想不到这个都可以，太强大了</p>
<pre tabindex=0><code>git log
git reset --soft ${commit-id}
git stash
git push -f
</code></pre><h3 id=git-log>Git log</h3>
<p>一直以来对于 git log &ndash;graph 有一种似懂非懂的感觉。
<a href=http://gitbook.liuhui998.com/3_4.html>来自 Git Community Book 中文版 - 查看历史 - Git 日志</a> 提到<code>日志排序</code>的几种</p>
<ul>
<li>逆时间顺序 (reverse chronological)： 默认情况下为这种方式</li>
<li>拓扑顺序 (&ndash;topo-order): 子提交在他们的福提交前显示，这种方式会看到”开发线“(development lines) 都会集合在一起</li>
<li>提交日期顺序</li>
</ul>
<blockquote>
<p>Talk is cheap，Show me the code or money~</p>
</blockquote>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3b05a0a3b23c3b160359824339a7ea82>43 - Daily 9/5</h1>
<p>一直要做的事情：知识的系统化梳理<br>
LP生气了，换了微信头像，发了朋友圈，哽咽几下，而我说了一堆话，不知道有没有用</p>
<ul>
<li>vue+webpack重构了整个项目，明天上线新系统，工作上事情很多,做不完的工作,学不完的知识（系统化多重要）
<ul>
<li>工作上的发展方向是怎样的，这个问题一直不想，TMCD！</li>
</ul>
</li>
<li>贸易上的事情进展太慢了
<ul>
<li>Amazon上产品</li>
<li>开模新产品</li>
<li>产品包装：产品尺寸定做包装</li>
<li>发货还是个问题，FBA</li>
</ul>
</li>
</ul>
<p>说了一句话：“我对自己也不满意” ，英文翻译过去应该是&rsquo;fuck yourself, or What'.<br>
睡觉，长叹一口气！</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3e7749c7032db639158bfd853be29f21>44 - Daily 9/6</h1>
<h3 id=感情>感情</h3>
<p>关进了小黑(la)屋(hei)</p>
<p>过了2个小时，出来了！上次也是关了几个小时。<br>
生气了一会就自我恢复了。</p>
<h3 id=工作>工作</h3>
<p>新系统顺利上线了</p>
<h3 id=学习>学习</h3>
<p><a href=https://hughfdjackson.com/javascript/why-curry-helps/> Curry 编程</a> Currying is the process of turning a function that expects multiple parameters into one that, when supplied fewer parameters, returns a new function that awaits the remaining ones.</p>
<p><a href=http://ramdajs.com/>Ramda.js</a> A practical functional library for JavaScript programmers.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b614d07cd7c901562de1ae291997c681>45 - Daily 9/8</h1>
<h3 id=学习>学习</h3>
<br>
#### Python时间处理
[Python dateutil](https://dateutil.readthedocs.io/en/stable/index.html) 非常强大的时间处理，对这种数据'Fri, 21 Jul 2017 14:42:50 +0800'轻易解析
[strftime](http://strftime.org/) 最详细的时间格式说明
[3.15 字符串转换为日期](http://python3-cookbook.readthedocs.io/zh_CN/latest/c03/p15_convert_strings_into_datetimes.html)官网文档datetime.strptime
```python
date.today().strftime(u'%Y年%m月%d日'.encode('utf-8')).decode('utf-8')
```
<br>
#### EMAIL收发邮件
[官网email](https://docs.python.org/2/library/email-examples.html)发送邮件的详细例子
[POP3收取邮件](https://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/001408244819215430d726128bf4fa78afe2890bec57736000) 详细教程
[Reply to email using python 3.4](https://stackoverflow.com/questions/31433633/reply-to-email-using-python-3-4)回复邮件的代码
[邮件解析](http://blog.donews.com/limodou/archive/2004/12/30/220588.aspx) 编码问题
[邮件详细解析](http://www.cnblogs.com/zixuan-zhang/p/3402821.html) 这个更详细
<br>
<br>
#### PYTHON GIT
[pygit2](http://www.pygit2.org/merge.html) python api for git
<br>
### 生活
周日去香港徒步，16公里
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-d317738cb1682d537736db77b07bded5>46 - 又是一年最长假-国庆 Daily 9/29</h1>
<h2 id=生活>生活</h2>
<p>国庆长假对于工作的人真是长假! 回！</p>
<h2 id=学习>学习</h2>
<h3 id=vim>Vim</h3>
<p><a href=http://vim.wikia.com/wiki/Switching_case_of_characters>Switching case of characters</a> 还是官网文档比较给力</p>
<h3 id=javascript>Javascript</h3>
<p><a href=https://stackoverflow.com/questions/4994201/is-object-empty>Is object empty? </a> JS中如何判断一个空的对象</p>
<p>Array最后一个元素</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>args</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#204a87>Array</span><span style=color:#000;font-weight:700>([</span><span style=color:#4e9a06>&#39;www&#39;</span><span style=color:#000;font-weight:700>],[</span><span style=color:#4e9a06>&#39;phpernote&#39;</span><span style=color:#000;font-weight:700>],[</span><span style=color:#4e9a06>&#39;com&#39;</span><span style=color:#000;font-weight:700>]);</span>
<span style=color:#000>alert</span><span style=color:#000;font-weight:700>(</span><span style=color:#000>args</span><span style=color:#000;font-weight:700>.</span><span style=color:#000>pop</span><span style=color:#000;font-weight:700>());</span><span style=color:#8f5902;font-style:italic>//com
</span></code></pre></div><h3 id=正则表达式>正则表达式</h3>
<p><a href=http://www.vaikan.com/regular-expression-to-match-string-not-containing-a-word/>不匹配的问题</a></p>
<pre tabindex=0><code>^((?!hede).)*$
</code></pre><h3 id=webpack>Webpack</h3>
<p>修改dev server的根目录</p>
<pre tabindex=0><code>devServer: {
  contentBase: path.join(__dirname, &quot;dist&quot;),
  compress: true,
  port: 9000
}
</code></pre><p>当js文件名webpack打包生成的时候，不能写死在html中，如何让js文件自动加入到html文件中</p>
<p><code>HtmlWebpackPlugin</code> 插件解决了这个问题</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>HtmlWebpackPlugin</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000>require</span><span style=color:#000;font-weight:700>(</span><span style=color:#4e9a06>&#39;html-webpack-plugin&#39;</span><span style=color:#000;font-weight:700>);</span>
<span style=color:#204a87;font-weight:700>var</span> <span style=color:#000>webpackConfig</span> <span style=color:#ce5c00;font-weight:700>=</span> <span style=color:#000;font-weight:700>{</span>
  <span style=color:#000>entry</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;index.js&#39;</span><span style=color:#000;font-weight:700>,</span>
  <span style=color:#000>output</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>{</span>
    <span style=color:#000>path</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000>__dirname</span> <span style=color:#ce5c00;font-weight:700>+</span> <span style=color:#4e9a06>&#39;/dist&#39;</span><span style=color:#000;font-weight:700>,</span>
    <span style=color:#000>filename</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#4e9a06>&#39;index_bundle.js&#39;</span>
  <span style=color:#000;font-weight:700>},</span>
  <span style=color:#000>plugins</span><span style=color:#ce5c00;font-weight:700>:</span> <span style=color:#000;font-weight:700>[</span><span style=color:#204a87;font-weight:700>new</span> <span style=color:#000>HtmlWebpackPlugin</span><span style=color:#000;font-weight:700>()]</span>
<span style=color:#000;font-weight:700>};</span>
</code></pre></div><p><a href=https://github.com/jantimon/html-webpack-plugin>github 项目地址</a></p>
<h3 id=vue>VUE</h3>
<p>Vue.js 带来的良好的开发模式：模板，数据绑定，组件化，自动化，资源统一化</p>
<p><a href=http://blog.csdn.net/lihongxun945/article/details/51841072>vue-mobile - 一个基于VUE的UI框架</a></p>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
<small class=text-white>&copy; 2022 Elon All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>隐私政策</a></small>
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js integrity="sha256-OxcsE7YsK+qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin=anonymous></script>
</body>
</html>